<<<<<<< HEAD
{"name":"ReduceTokenSize","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/svg/degen.svg","scope":"global","command":"_token.document.update({ \"width\": 0.5, \"height\": 0.5 })","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.9RmkB9ho3xMdKx3o"},"scene-packer":{"sourceId":"Macro.Oy8J0SwfrVlY1F02","hash":"3f70744b245168310f6d2bef7e4179afb7eadad7"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669684244062,"modifiedTime":1676937176956,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"26YJeWQWF8LJcKkd","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Change Rest Inn","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/environment/settlement/house-woods.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Inn\");","flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.K8NDRp6l1L1VW0FV","hash":"0bce8e0aff4ecb0b064f63e6bd03dac0f8bd7d6c"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.K8NDRp6l1L1VW0FV"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668729683197,"modifiedTime":1676937164256,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"570Gt6ZZ82wLaulV","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Update items","type":"script","scope":"global","author":"Nz6IhKcjVxEf5RCK","img":"icons/svg/dice-target.svg","command":"await game.items.map(x=>{\nif(x.type == \"consumable\" && x.system.consumableType == \"food\" && x.folder.name == \"Meal\"){\nx.update({\n    'system.weight':1,\n     'system.price.value':x.system.price.value * 5,\n     'system.actionType':'heal',\n     'system.activation.cost': 10,\n     'system.activation.type': \"minute\",\n     'system.duration.units': \"hour\",\n     'system.duration.value':1,\n     'system.target.type': \"creature\",\n     'system.target.value': 1,\n     'system.range.units': \"touch\" \n     \n\n})\nconsole.log(x.name, x.system.weight)\n}\n})","flags":{"scene-packer":{"hash":"61f86632163483292a6b0869da966e9403ae72b5"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668380874828,"modifiedTime":1676937176959,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"5P25VnQimErKQplg","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Ativar/Desativar Boot of Speed","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/equipment/feet/boots-collared-blue-gold.webp","command":"let actorEffects = _token.actor.effects;\nlet nameEffect = \"Boots of Speed\";\n\nlet effect = await actorEffects.find(x=>x.label == nameEffect);\nif(effect){\n    let disposition = !effect.disabled;\n    console.log(effect)\n    await _token.actor.updateEmbeddedDocuments(\"ActiveEffect\", [{_id: effect._id, disabled: disposition}])\n    console.log(effect)\n}","flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1671160404118,"modifiedTime":1676937100670,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"5q0qXr2f9N0jIwJs","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RollTable: Confuse Gase","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/magic/control/hypnosis-mesmerism-swirl.webp","scope":"global","command":"game.tables.getName(\"Confusing Gaze\").draw();","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.9Oj6culNDa8SiI5d","hash":"879bcab14e56f838f7bda8d7d44ed59b45e844c7"},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.9Oj6culNDa8SiI5d"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302061462,"modifiedTime":1676937129955,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"9Oj6culNDa8SiI5d","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Editar as Flechas","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","command":"await game.items.map(x=>{\n\tif(x.type == \"consumable\" && x.system.consumableType == \"ammo\" && x.folder.name == \"Consumable Ammunition Slaying\"){\n\t\tx.update({'system.target.value':null, 'system.range.value':5, 'system.range.units':\"ft\", 'system.duration.value':null, 'system.uses.value':null, 'system.uses.max':null, 'system.uses.autoDestroy':true})\nconsole.log(x.name, x)\n}\n});\nconsole.log(\"FIM\")","flags":{"scene-packer":{"hash":"61f86632163483292a6b0869da966e9403ae72b5"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668380874828,"modifiedTime":1676937176966,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"A1GmjLHcF6wwErm1","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RemoveConditions","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/magic/symbols/ring-circle-smoke-blue.webp","command":"//RemoveConditions blinded\nconsole.log(\"CONDITION\", args);\nconst lastArg = args[args.length-1];\nconst effect = args[1];\n\nconst hasEffectApplied = await game.dfreds.effectInterface.hasEffectApplied(effect , lastArg.actorUuid);\n\nif (hasEffectApplied) {\n  game.dfreds.effectInterface.removeEffect({ effectName: effect , lastArg.actorUuid});\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668699913372,"modifiedTime":1676937124720,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"B9OngQMVbredXG7r","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Pular","type":"script","scope":"global","author":"DPSwXpPVU8d93GBw","img":"icons/skills/movement/arrows-up-trio-red.webp","command":"var myStr = actor.system.abilities.str ?? _token.actor.system.abilities.str;\nvar ftDist = myStr.value / 2;\nvar ftDisRun = myStr.value;\nvar ftAlt = (myStr.mod +3)/2;\nvar ftAltRun = myStr.mod+3;\nlet results_html = `<h1>Salto à Distância</h1><p>Correndo +10 ft: <strong> ${ftDisRun} ft </strong></p><p>Parado: <strong> ${ftDist} ft </strong></p><p>Magia Jump: <strong>${ftDisRun*3} ft/ ${ftDist*3} ft</strong></p><p>Aterrissando em terreno dificil deve fazer um <strong>teste de Destreza CD 10</strong> para não cair</p><h1>Salto em Altura</h1><p>Correndo +10 ft: <strong> ${ftAltRun} ft </strong></p><p>Parado: <strong> ${ftAlt} ft </strong></p><p>Magia Jump: <strong>${ftAltRun*3} ft/ ${ftAlt*3} ft</strong></p><p>as mãos alcançam a somatoria de sua area de ameaça (padrão +5 ft)</p><hr><p>o valor é descontado do seu total de movimento, tanto na subida, quanto na descida.</p><p> Não pode terminar seu movimento no ar sem ter a condição flutuar ou voar, o que resulta em queda [[/r 1d6]] de concussão a cada 10 ft</p><p>cair ou pousar pode gerar ataque de oportunidade para o oponente</p>`\nChatMessage.create({\nuser: game.user._id,\nspeaker: ChatMessage.getSpeaker({token: actor}),\ncontent: results_html\n});","flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.NgiKr3KtPhnAoSXq","defaultPermission":2},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.BP0boqhwdDB69oKH"},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937100681,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"BP0boqhwdDB69oKH","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Set Elevation","type":"script","scope":"global","author":"DPSwXpPVU8d93GBw","img":"icons/svg/mountain.svg","command":"let applyChanges = false;\n\nif(args && args.length>0){\nconsole.log(args);\n  let enterval=parseFloat(args[0]);\n  let exitval= args.length>1?parseFloat(args[1]):null;\n  let elevation=0;\n  if(event && event === MLT.ENTER)\n    elevation = enterval;\n  else if(event ** event === MLT.LEAVE)\n    elevation = exitval;\n    token.update({\n        \"elevation\": elevation\n    });\n}\nelse\n{\n    new Dialog({\n    title: `Token Elevation Changer`,\n    content: `\n      <form>\n        <div class=\"form-group\">\n          <label>Elevation Value:</label>\n          <input id=\"token-elevation\" name=\"token-elevation\" type=\"number\" step=\"1\" value=\"0\"/>\n        </div>\n      </form>\n      `,\n    buttons: {\n      yes: {\n        icon: \"<i class='fas fa-check'></i>\",\n        label: `Apply Changes`,\n        callback: () => applyChanges = true\n      },\n      no: {\n        icon: \"<i class='fas fa-times'></i>\",\n        label: `Cancel Changes`\n      },\n    },\n    default: \"yes\",\n    close: html => {\n      if (applyChanges) {\n        for ( let token of canvas.tokens.controlled ) {\n        let elevation = html.find('[name=\"token-elevation\"]')[0].value || \"0\";\n        token.document.update({\n            \"elevation\": parseFloat(elevation)\n        });\n        //token.data.elevation=parseInt(elevation);\n\n        }\n      }\n    }\n  }).render(true);\n}","flags":{"core":{"sourceId":"Macro.CpL3YgGgMfvubvuq"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"},"combat-utility-belt":{"macroTrigger":""},"scene-packer":{"sourceId":"Macro.2ccVqghN8LvCg0jS"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937164258,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"CFwXmf2esSFBBGZ9","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Toggle Token Terrain","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/magic/movement/chevrons-down-yellow.webp","command":"//Retrieve the controlled tokens.\nconst tokens = canvas.tokens.controlled;\n//Iterate over each token.\ntokens.forEach((token) => {\n        //Grab the current configured terrain settings, or if they don't exist provide a default configuration.\n\tconst configuredEnvironments = token.document.getFlag('elevation-drag-ruler', 'ignoredEnvironments') || {'all': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'arctic': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'coast': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'desert': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'forest': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'grassland': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'jungle': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'mountain': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': true, 'climb': true}, 'swamp': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'underdark': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'urban': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'water': {'any': false, 'walk': false, 'swim': true, 'fly': false, 'burrow': false, 'climb': false}};\n\t//Toggle the setting to ignore all terrain for any movemement speed.\n\tif (configuredEnvironments.all.any) configuredEnvironments.all.any = false;\n\telse configuredEnvironments.all.any = true;\n\t//Update the token flag.\n\ttoken.document.setFlag('elevation-drag-ruler', 'ignoredEnvironments', configuredEnvironments);\n});","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669592534176,"modifiedTime":1676937164260,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"Cde5uCMcvkLmVIgp","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RollTable: Complications Research","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/sundries/books/book-embossed-gold-red.webp","scope":"global","command":"game.tables.getName(\"Complications Research\").draw();","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/d20-grey.svg","tooltip":"RollTable: Research Complications","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.GCmalnLgLekr0TXS"},"scene-packer":{"sourceId":"Macro.FbNYFqq0H9REoWC6","hash":"a926f6933adf17eedbcc707e5cf46476990c08c2"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302061365,"modifiedTime":1676937129958,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"FbNYFqq0H9REoWC6","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"SizeToken","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/magic/control/silhouette-grow-shrink-tan.webp","scope":"global","command":"const version = \"10.0.18\";\n// SizeToken 2 || lg\n// Size com multiplicdor\n//console.log(\"SizeToken\", args);\nconst lastArg = args[args.length - 1];\nconst xtarget = await fromUuid(lastArg.tokenUuid, \"Token\");\nlet size = args[1];\nlet systemSize = Object.keys(CONFIG.DND5E.actorSizes);\nlet SizeSystem = { \"tiny\": 0.5, \"sm\": 1, \"med\": 1, \"lg\": 2, \"huge\": 3, \"grg\": 4 }\n\ntry {\n    if (args[0] === \"on\") {\n        xtarget.setFlag('innocenti-worlds', `SizeToken`, {\n            \"width\": xtarget.width,\n            \"height\": xtarget.height,\n            \"system.traits.size\": xtarget.actor.system.traits.size\n        }).then(async () => {\n            var newSize;\n            if (typeof size === 'string') {\n                newSize = size;\n                size = SizeSystem[newSize];\n            } else {         \n                for (let key in systemSize) {\n                    if (systemSize[key] === xtarget.actor.system.traits.size) {\n                        let nkey = (size > 0) ? parseInt(key) + (size - 1) : parseInt(key) + size;\n                        newSize = systemSize[nkey];\n                    }\n                }\n                size = SizeSystem[newSize];\n            }\n            var changeData = {\n                width: xtarget.width * size,\n                height: xtarget.height * size,\n            }\n            await xtarget.update(changeData);\n            await xtarget.actor.update({ 'system.traits.size': newSize });\n            ChatMessage.create({ content: xtarget.name + \" is change size to: \" + CONFIG.DND5E.actorSizes[newSize]});\n        });\n    }\n    if (args[0] === \"off\") {\n        const flag = xtarget.getFlag('innocenti-worlds', `SizeToken`);\n        await xtarget.update({ width: flag.width, height: flag.height });\n        await xtarget.actor.update({ 'system.traits.size': flag.system.traits.size });\n        xtarget.unsetFlag('innocenti-worlds', `SizeToken`);\n        ChatMessage.create({ content: xtarget.name + \" returns to normal\" });\n    }\n} catch (err) {\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669684504002,"modifiedTime":1676937124723,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"FeXF5sCoCmxLN2gs","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Rollable Table: Confuse Table","type":"script","scope":"global","command":"game.tables.get(\"bz6koupLybKTnQFR\").draw();","img":"icons/magic/symbols/question-stone-yellow.webp","author":"dMfobz2VOtfW25fX","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302567290,"modifiedTime":1676937129966,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"J826GRhceiXHyEfe","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Drop Torch","type":"script","author":"Nz6IhKcjVxEf5RCK","img":"icons/sundries/lights/torch-brown-lit.webp","scope":"global","command":"let targets = canvas.tokens.controlled;\nlet actorName = 'Dropped Torch';\nfor( let i = 0; i < targets.length; i++) {\n  let target = targets[i];\n  let center = target.center;\n  switch (target.data.light.dim) {\n    case 60:\n      actorName = 'Dropped Hooded Lantern (open)';\n      break;\n    case 10:\n      actorName = 'Dropped Candle';\n      break;\n    case 5:\n      actorName = 'Dropped Hooded Lantern (closed)';\n      break;\n    case 120:\n      actorName = 'Dropped Bullseye Lantern';\n      break;\n    case 45:\n      actorName = 'Dropped Lamp';\n      break;\n  }\n  try {\n    let protoToken = duplicate(game.actors.getName(actorName).data.token);\n    protoToken.x = center.x;\n    protoToken.y = center.y;\n    canvas.scene.createEmbeddedDocuments(\"Token\", [protoToken])\n  }\n  catch(err) {\n    ui.notifications.error('Actor not found. Please import all from \"Drop My Torch tokens\" compendium pack');\n  }\n\n  target.document.update({\"light.dim\": 0, \"light.bright\": 0});\n}","flags":{"core":{"sourceId":"Macro.50PjwvRxSW29mUki"},"scene-packer":{"hash":"40b0e57bf43a6220a74e87f5b52c537e4e8d5fc5"},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1666933713542,"modifiedTime":1676937100684,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"L0kGdrEIGVaLJ8vx","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Change Rest Dungeon","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/environment/wilderness/tomb-entrance.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Dungeon\");","flags":{"advanced-macros":{"runAsGM":true},"scene-packer":{"hash":"e4cda2178ce277ab9d4cedfd1eebdb206975eaf3","sourceId":"Macro.PPrpyeGEUXcIotUZ"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.PPrpyeGEUXcIotUZ"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668729673168,"modifiedTime":1676937164266,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"MEAMn3tCUKKQJI2S","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"WeaponsDamages","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/skills/melee/sword-damaged-broken-red.webp","scope":"global","command":"let destroyOn = -5;\nlet setDamage = parseInt(args[1]) ?? -1\nlet listitem = _token.actor.items.filter(x=>x.type == \"weapon\" && x.system.properties?.mgc != true)\n.sort((a, b) => a.name.localeCompare(b.name))\n.map(x=>{\n    return `<option value=\"${x.uuid}\">${x.name}</option>`\n});\nlet formulario = \n    `<div>Personagem: ${_token.name} </div>\n    <div>\n        <label for=\"weapon\"> Seleciona a Arma:\n            <select id=\"weaponDamage\" name=\"weaponDamage\">\n            ${listitem}\n            </select>\n        </label>\n    </div>\n    <div>\n        <label for=\"weaponDamageNum\"> Dano:\n            <input id=\"weaponDamageNum\" name=\"weaponDamageNum\" type=\"number\" value=\"${setDamage}\"/>\n        </label>\n    <div>`;\nconsole.log(listitem.join(\"\"));\nlet dialog = new Dialog({\n    title: \"Danificar Armas\",\n    content: formulario,\n    buttons:{\n        one:{\n            icon:'<i class=\"fas fa-dice-d20\"></i>',\n            label:\"Usar\",\n            callback: async () => {\n                let wDamage = $(`#weaponDamageNum`).val();\n                let weapon = $(`#weaponDamage option:selected`).val();\n                let weaponName = $(`#weaponDamage option:selected`).text();\n                let itemWeapon = await MidiQOL.MQFromUuid(weapon);\n                let weaponFlag = itemWeapon.system.flags?.weapondamage?.hits ?? 0;\n                weaponFlag = parseInt(weaponFlag);\n                if(weaponFlag <= destroyOn){\n                    _token.actor.items.delete(itemWeapon.id);\n                    let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Weapon: <strong>${weaponName}</strong> of ${_token.name} has destroyed`\n                };\n                ChatMessage.create(chatData, {});\n                    return;\n                }\n                weaponFlag += parseInt(wDamage);\n                let rDamage = itemWeapon.system?.damage?.parts;\n                let nDamage = [];\n                if (rDamage.length > 0) {\n                    for (var i = 0; i < rDamage.length; i++) {\n                        nDamage.push([\"(\" + rDamage[i][0] + \")\" + wDamage, rDamage[i][1]])\n                    }\n                    await itemWeapon.update({'system.damage.parts': nDamage,'system.flags.weapondamage.hits': weaponFlag});\n                }\n                let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Weapon: <strong>${weaponName}</strong> of ${_token.name} took the <strong>${wDamage} </strong> penalty`\n                    \n                };\n                ChatMessage.create(chatData, {});\nconsole.log(\"SLE\", weaponFlag, itemWeapon.system.flags);\n                \n            }\n        }\n    }\n});\n\ndialog.render(true);","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.mIMS1fQt9IE5UmtP"},"scene-packer":{"sourceId":"Macro.BMElmXejoBWuZFXn","hash":"d97442883052fb18d0f604b21cdf6fcac0baba71"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668737005510,"modifiedTime":1676937124726,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"MUUCQ6yAWLlnzG3R","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Open Door/Chest","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/sundries/misc/lock-open-yellow.webp","scope":"global","command":"let actions = new InnocentiOpenLock.Actions('OpenLock');","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.UXJLvaOUS8ANMPkp"},"furnace":{"runAsGM":false},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"},"scene-packer":{"sourceId":"Macro.wRQQl6XT1QppqyaE","defaultPermission":2,"hash":"7d1e163ba2391ab0fa0fddfb94d98712a4c327b9"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367324790,"modifiedTime":1676937100687,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"OAf2omntQ45Q3GuV","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000","name":"Roll Tables","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["J826GRhceiXHyEfe","VANqAd4ml1n65UfF","zJI7JioCejYt5cou","cgj4qrbMWBr1K7bP","FbNYFqq0H9REoWC6","9Oj6culNDa8SiI5d","m2qz0W56msMmP3Rg","Y0NwMGiUXk0FqDah"],"version":"2.5.7"}},"author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367566429,"modifiedTime":1676937129990,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"P6S4wUMdgc97Fkmx"}
{"name":"Looting","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/commodities/currency/coins-patched-pouch-white.webp","scope":"global","command":"let action = new InnocentiLoot.Loot();\nawait action.Check();","flags":{"core":{"sourceId":"Macro.4EF55MrKqHBYzI0m"},"combat-utility-belt":{"macroTrigger":""},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"},"scene-packer":{"sourceId":"Macro.YF5eKuKN2jMSNIhC","defaultPermission":2,"hash":"4f861f6d2702d04a2db8be6fd15a708bd2be193f"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367324666,"modifiedTime":1676937100689,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"PaaRtEc2soDDv8bd","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Beverage","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/containers/kitchenware/stein-empty.webp","scope":"global","command":"//Beverage ##stackCount 8\nlet stack = args[1]\nlet saveDC = args[2] + (2 * stack);\nconst lastArg = args[args.length - 1];\nlet targetx = await fromUuid(lastArg.tokenUuid);\nlet result;\ntry {\n    if (args[0] === \"on\") {\n        result = await game.MonksTokenBar.requestRoll([{ \"token\": `${targetx.name}` }], {\n            request: [{ \"type\": \"save\", \"key\": \"con\" }], dc: saveDC,showdc:true, silent: true, fastForward: true, rollMode: 'roll'\n        });\n        let tokenResult = result.tokenresults[0];\n        if (!tokenResult.passed) {\n            await game.dfreds.effectInterface.addEffect({ effectName: 'Poisoned', uuid: lastArg.tokenUuid });\n            //console.log(\"Errei\")\n        }\n    }\n} catch (err) {\n    console.error(`Beverage`, err);\n}","flags":{"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1674402286546,"modifiedTime":1676937164268,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"PlAWoyOILAbQMMFV","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Saciar Sede e Fome","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/tools/cooking/pot-camping-iron-black.webp","command":"const actorD = game.actors.getName(_token.actor.name);\nconsole.log(actorD)\nawait game.restrecovery.setActorConsumableValues(_token.actor,{ food: 1, water: 1 ,starvation: 0});","flags":{"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1671068316041,"modifiedTime":1676937164270,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"PmqQaPnYh4rGFRls","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"DAEToggleTerrain","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/skills/melee/strike-blade-knife-white-red.webp","command":"//console.log(\"AAAA\", args)\nconst lastArg = args[args.length - 1];\nconst tokens = await fromUuid(lastArg.tokenUuid, \"Token\");\n//console.log(\"AAAA\", tokens)\nif (args[0] == \"on\" || args[0] == \"off\" && lastArg.tokenId != null) {\n\tconst configuredEnvironments = tokens.getFlag('elevation-drag-ruler', 'ignoredEnvironments') || { 'all': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'arctic': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'coast': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'desert': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'forest': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'grassland': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'jungle': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'mountain': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': true, 'climb': true }, 'swamp': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'underdark': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'urban': { 'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false }, 'water': { 'any': false, 'walk': false, 'swim': true, 'fly': false, 'burrow': false, 'climb': false } };\n\t//Toggle the setting to ignore all terrain for any movemement speed.\n\tif (configuredEnvironments.all.any) configuredEnvironments.all.any = false;\n\telse configuredEnvironments.all.any = true;\n\t//Update the token flag.\n\ttokens.setFlag('elevation-drag-ruler', 'ignoredEnvironments', configuredEnvironments);\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669654440850,"modifiedTime":1676937124732,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"R19Z2kHOszaq4bUL","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"SizeWeapons","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/weapons/axes/axe-battle-orange.webp","scope":"global","command":"const version = \"10.0.17\";\n//SizeWeapons 3\n//console.log(\"SizeWeapons\", args);\nconst lastArg = args[args.length - 1];\nconst mTimes = args[1] ?? 3;\nconst actor = await fromUuid(lastArg.actorUuid, \"Actor\");\n\n\ntry {\n    if (args[0] === \"on\") {\n        const listWeapons = actor.items.filter(x => x.type === \"weapon\" && x.system.damage?.parts)\n            .map(y => {\n                let copyItem = duplicate(y.toObject(false));\n                return {\n                    '_id': copyItem._id, system: {\n                        damage: {\n                            parts: copyItem.system.damage.parts\n                        }\n                    }\n                }\n            });\n        console.log(\"WEAPOPNS\", listWeapons);\n        DAE.setFlag(actor, `SizeWeapons`, listWeapons)\n            .then(() => {\n                listWeapons.map(x => {\n                    return x.system.damage.parts.forEach(y => {\n                       y[0] =  y[0].replace(/([0-9]{1,2})(d[0-9]{1,3})/g, function (all, numb, dado) { return `${parseInt(numb) * mTimes}${dado}` });\n                       return y;\n                    });\n                });\n            actor.updateEmbeddedDocuments(\"Item\", listWeapons);\n            ChatMessage.create({ content: \"All weapons and armor increased in size\" });\n            console.log(\"WEAPON\", listWeapons);\n        });\n    }\n    if (args[0] === \"off\") {\n        const flag = DAE.getFlag(actor, `SizeWeapons`);\n        await actor.updateEmbeddedDocuments(\"Item\", flag);\n        DAE.unsetFlag(actor, `SizeWeapons`);\n        //console.log(\"WEAPON\", actor.items);\n    }\n} catch (err) {\n    console.error(`SizeWeapons ${version}`, err);\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669691792219,"modifiedTime":1676937124735,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"RChxDQjpX4hTdIBn","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Create Tables By Rarity","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"game.betterTables.createTableFromCompendium(\"Equipment - Rings - Legendary\",\n    //\"world.all-itens\",\n    //\"world.all-wizard-spells\",\n    //\"world.all-cleric-spells\",\n    //\"world.all-spells\",\n    //\"innocenti-worlds.item-recipes\",\n    //\"dnd5e.items\",\n    //\"innocenti-worlds.item-foods\",\n    //\"innocenti-worlds.item-gemstones\",\n    //\"innocenti-worlds.item-charm\",\n    \"innocenti-worlds.item-custom\",\n    //\"dnd5e.spells\",\n    { weightPredicate: predicate }\n);\n\nfunction predicate(entity) {\n    //if(entity.folder.name != \"Beverage-Services\") return 0;\n    //if(entity.type != \"backpack\") return 0;\n    //if(entity.type != \"consumable\" && entity.type != \"loot\") return 0;\n    //if(entity.type != \"equipment\") return 0;\n    //if(entity.type != \"weapon\") return 0;\n    //if(entity.type != \"consumable\") return 0;\n    //if(entity.type != \"loot\") return 0;\n    //if(entity.type != \"tool\") return 0;\n    //if(entity.system.level != 9) return 0;\n    //if(entity.system.consumableType != \"scroll\") return 0;\n    //if(entity.type == \"consumable\" && entity.data.data.consumableType != \"trinket\") return 0;\n     //if(entity.system.consumableType != \"rod\") return 0;\n     //if(entity.system.consumableType != \"rod\" &&  entity.system.consumableType != \"wand\") return 0;\n     //if(entity.system.consumableType != \"potion\") return 0;\n    //if(entity.system.consumableType != \"poison\") return 0;\n   // if(entity.system.consumableType != \"ammo\") return 0;\n    //if(entity.system.consumableType != \"food\") return 0;\n    //if(entity.system.consumableType != \"trinket\") return 0;\n    //if(entity.system.consumableType != \"wand\") return 0;\n    //if(entity.system.weaponType != \"improv\") return 0;\n    //if(entity.system.weaponType != \"martialM\") return 0;\n    //if(entity.system.weaponType != \"martialR\") return 0;\n    //if(entity.system.weaponType != \"simpleM\") return 0;\n    //if(entity.system.weaponType != \"simpleR\") return 0;\n    //if(entity.system.toolType != \"art\") return 0;\n    //if(entity.system.armor.type == \"trinket\") return 0;\n    //if(entity.system.armor.type != \"heavy\") return 0;\n    //if(entity.system.armor.type != \"light\") return 0;\n    //if(entity.system.armor.type != \"medium\") return 0; \n    //if(entity.system.armor.type != \"natural\") return 0; \n    //if(entity.system.armor.type != \"shield\") return 0; \n    //if(entity.system.armor.type != \"clothing\") return 0;\n    //if(entity.system.armor.type == \"medium\" || entity.system.armor.type == \"heavy\" || entity.system.armor.type == \"light\" ||entity.system.armor.type == \"trinket\") return 0;\n    //if(!entity.name.match(/Avenger/gi)) return 0;\n    //if(entity.name.match(/Slayer/gi) || entity.name.match(/Vicious/gi) || entity.name.match(/Sharpness/gi) ) return 0;\n    //if(entity.name.match(/Avenger/gi) || entity.name.match(/Luck/gi) || entity.name.match(/Answering/gi) || entity.name.match(/Sharpness/gi)) return 0;\n    if(entity.name.match(/Ring /gi) == null) {\n        \n        return 0;\n        }\n        console.log(\"RING\", entity.name.match(/Ring*/gi))\n    \n   //if(entity.system.rarity != \"common\") return 0;\n   //if(entity.system.rarity != \"uncommon\") return 0;\n   //if(entity.system.rarity != \"rare\") return 0;\n   //if(entity.system.rarity != \"veryRare\") return 0;\n  if(entity.system.rarity != \"legendary\") return 0\n    //if(entity.system.rarity != \"artifact\") return 0;\n    \n    //if(entity.system.price.value != 10) return 0;\n    //if(entity.system.source != \"Animal\") return 0;\n    //if(entity.system.source != \"Goods\") return 0;\n    //if(entity.system.source != \"Beverage\") return 0;\n    //if(entity.system.source != \"Meal\") return 0;\n    //if(entity.system.source != \"Adventuring Gear\") return 0;\n      if(entity.name == '#[CF_tempEntity]') return 0;\n   return 1;\n \n/*\nconsole.log(\"Name\", entity.name)\n   \n    switch (entity.system.rarity) {\n        case \"common\":\n            return 16;\n            //return 0;\n        case \"uncommon\":\n            return 8;\n            //return 0;\n        case \"rare\":\n            return 4;\n            //return 0;\n        case \"veryRare\":\n            return 2;\n    //        //return 0;\n        case \"legendary\":\n            return 1;\n            //return 0;\n        case \"artifact\":\n            return 1;\n            //return 0;\n            \n        default:\n            return 1;\n    }\n    \n   */\n  \n}","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Create Tables By Rarity ","colour":"#ff0000","trigger":""}},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.5c6EJu8botD8BsOp"},"scene-packer":{"sourceId":"Macro.q8kAJglXUA6bYlga"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937176969,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"RelDIYCOduUswrnl","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"ImmunityCustomCondition","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/magic/symbols/runes-star-blue%20.webp","scope":"global","command":"//ImmunityCustomCondition Slippery Ice\nconsole.log(\"Condotion\", args);\nconst lastArg = args[args.length-1];\nconst conditionCustom = args[1];\nconst xtarget = MidiQOL.MQfromActorUuid(lastArg.tokenUuid)\nconst crList = xtarget.system.traits.ci.custom;\n\nlet customCondition = crList.split(\";\").map(function(x) {\n  return x.trim();\n}).includes(conditionCustom)\n\n\n\nif (customCondition == true && args[0] == \"on\") {\n\tlet efData = { effectName: lastArg.efData.label, uuid: lastArg.actorUuid}\n\tawait game.dfreds.effectInterface.removeEffect(efData);\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669344382798,"modifiedTime":1676937124738,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"Sg8Mf1aR7rN4HNZ3","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Rollable Table: Deck f Illusion Table","type":"script","scope":"global","command":"game.tables.get(\"raCHwSYtsGvuy6xj\").draw();","img":"icons/sundries/gaming/playing-cards-grey.webp","author":"dMfobz2VOtfW25fX","flags":{"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670446127238,"modifiedTime":1676937129967,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"VANqAd4ml1n65UfF","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Movimento diagonal 3D","type":"script","scope":"global","author":"Nz6IhKcjVxEf5RCK","img":"icons/skills/movement/arrow-upward-blue.webp","command":"//console.log(((30/5)/1.5)*5)\nlet telev = _token.document.elevation;\nlet diag = 0.75;\nlet tmov = _token.actor.system.attributes.movement;\n\nlet dialogEditor = new Dialog({\n    title: `Mover na Diagonal 3d`,\n    content: `Selecione um tipo de movimento em três dimensões`,\n    buttons: {\n        voar: {\n            label: `Voar (${tmov.fly} ft)`,\n            callback: () => {\n                let mov = (tmov.fly - telev) * diag;\n                ChatMessage.create({\n                    user: game.user._id,\n                    speaker: ChatMessage.getSpeaker({ token: actor }),\n                    content: `${mov} ft movimento máximo em diagonal Voando`\n                });\n                dialogEditor.render(true);\n            }\n        },\n        cavar: {\n            label: `Cavar (${tmov.burrow} ft)`,\n            callback: () => {\n                let mov = (tmov.burrow- telev) * diag;\n                ChatMessage.create({\n                    user: game.user._id,\n                    speaker: ChatMessage.getSpeaker({ token: actor }),\n                    content: `${mov} ft movimento máximo em diagonal cavando`\n                });\n                dialogEditor.render(true);\n            }\n        },\n        nadar: {\n            label: `Nadar (${tmov.swim} ft)`,\n            callback: () => {\n                let mov = (tmov.swim- telev) * diag;\n                ChatMessage.create({\n                    user: game.user._id,\n                    speaker: ChatMessage.getSpeaker({ token: actor }),\n                    content: `${mov} ft movimento máximo em diagonal nadando`\n                });\n                dialogEditor.render(true);\n            }\n        },\n        close: {\n            label: \"Close\",\n            icon: \"<i class='fas fa-tick'></i>\",\n        }\n    },\n    default: \"close\",\n    close: () => { }\n});\ndialogEditor.render(true)","flags":{"scene-packer":{"hash":"61f86632163483292a6b0869da966e9403ae72b5"},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.VIBXKpwfeNST0634"},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1667662811002,"modifiedTime":1676937100698,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"VIBXKpwfeNST0634","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"DAETokenTerrain","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/environment/wilderness/terrain-river-road-gray.webp","command":"console.log(\"Condotion\", args);\n//DAETokenTerrain arctic walk true\nconst lastArg = args[args.length-1];\nconst terrainType = args[1];\nconst moveType = args[2];\nlet activate = args[3];\nconst xtarget = await fromUuid(lastArg.tokenUuid);\nconsole.log(\"ALVO\", xtarget );\nconst configuredEnvironments = xtarget.getFlag('elevation-drag-ruler', 'ignoredEnvironments') || {'all': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'arctic': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'coast': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'desert': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'forest': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'grassland': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'jungle': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'mountain': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': true, 'climb': true}, 'swamp': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'underdark': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'urban': {'any': false, 'walk': false, 'swim': false, 'fly': false, 'burrow': false, 'climb': false}, 'water': {'any': false, 'walk': false, 'swim': true, 'fly': false, 'burrow': false, 'climb': false}};\n\nif(args[0] == \"on\" && lastArg.tokenId != null){\n\tconfiguredEnvironments[`${terrainType}`][`${moveType}`] = activate\n\txtarget.setFlag('elevation-drag-ruler', 'ignoredEnvironments', configuredEnvironments);\n}\n\nif(args[0] == \"off\" && lastArg.tokenId != null){\n\tconfiguredEnvironments[`${terrainType}`][`${moveType}`] = !activate\n\txtarget.setFlag('elevation-drag-ruler', 'ignoredEnvironments', configuredEnvironments);\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669678634423,"modifiedTime":1676937124740,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"WtAzhtnD8hLPzwFZ","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RollTable: Segredos dos Personagens","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/sundries/books/book-red-exclamation.webp","scope":"global","command":"game.tables.getName(\"Segredos dos Personagens\").draw();","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.O44VSFhNABFnWEKn"},"scene-packer":{"sourceId":"Macro.Y0NwMGiUXk0FqDah","hash":"256d09eb8fa6fce6c1d847a555f2ade76158975e"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302061695,"modifiedTime":1676937129971,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"Y0NwMGiUXk0FqDah","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RollTable: Complications","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/magic/death/undead-skeleton-deformed-red.webp","scope":"global","command":"game.tables.getName(\"Complications\").draw();","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/d20-grey.svg","tooltip":"RollTable: Complications","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.HEbMljxKEOZBEgYp"},"scene-packer":{"sourceId":"Macro.cgj4qrbMWBr1K7bP","hash":"cda5fedb9ab8727466d268e1e7eb85a83eb4fc0c"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302061268,"modifiedTime":1676937129974,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"cgj4qrbMWBr1K7bP","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"DisableCondition","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/magic/symbols/runes-star-orange.webp","command":"console.log(\"Args\", args);\nconst version = \"10.0.18\";\n//DisableCondition Invisible\nlet lastArg = args[args.length - 1];\nlet effectName = args[1];\nlet tokenActor = await fromUuid(lastArg.tokenUuid, \"Token\");\nconst CE = game.dfreds.effectInterface;\n\ntry {\n    if (args[0] === \"on\") {\n        if (CE.hasEffectApplied(effectName, lastArg.tokenUuid)) {\n            DAE.setFlag(actor, `DisableCondition${effectName}`, effectName).then(async () => {\n                await CE.removeEffect({ effectName: effectName, uuid: lastArg.tokenUuid });\n            });\n        }            \n        ChatMessage.create({ content: token.name + \" loose condition: \" + effectName });\n    }\n    if (args[0] === \"off\") {\n        const flag = DAE.getFlag(token, `DisableCondition${effectName}`);\n        if (flag == effectName) {\n            await CE.addEffect({ effectName: effectName, uuid: lastArg.tokenUuid, origin: lastArg.itemUuid });\n            ChatMessage.create({ content: token.name + \" regained the condition of: \" + effectName });\n        }        \n    }\n} catch (err) {\n    console.error(`DisableCondition} ${version}`, err);\n}","flags":{"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1671659824442,"modifiedTime":1676937124742,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"f11mXtuJRLleVw2K","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Chenge Status to Hostil/Friend","type":"script","scope":"global","author":"DPSwXpPVU8d93GBw","img":"icons/skills/social/intimidation-impressing.webp","command":"let tokens = canvas.tokens.controlled;\nlet htmlcontent = ``;\nfor (var i = 0; i < tokens.length; i++) {\n    //console.log(\"TOK\",tokens[i])\n    let dispo = (tokens[i].document.disposition == -1) ? 1 : -1\n    let dispoName = (dispo == 1) ? 'Amigável': 'Hostil';\n    await tokens[i].document.update({ 'disposition': dispo });\n    htmlcontent += `<p> ${tokens[i].name} agora é ${dispoName} </p>`\n}\nChatMessage.create({\n    user: game.user._id,\n    speaker: ChatMessage.getSpeaker({ token: actor }),\n    whisper: game.users.filter(u => u.isGM).map(u => u.id),\n    content: htmlcontent\n});\nconsole.log(\"END\")","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.Zgma5y5sBfS8HC6t"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937164273,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"fbjmhwOTQ1ihR8SY","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Visitar","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/environment/settlement/house-farmland-small.webp","scope":"global","command":"let visitar = InnocentiWorld.Visitar();","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/hanging-sign.svg","tooltip":"Visitar","colour":"#80ff80","trigger":""}},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.AN84WHe2g38no7vo"},"scene-packer":{"sourceId":"Macro.IkcVSqbWaT2wdm0A","defaultPermission":2,"hash":"78825d34e17be363575b86c876a36ccd3cfc97f7"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367325042,"modifiedTime":1676937100701,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"gO8FZ19UHpdp31Tn","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000","name":"GM_Aux","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["PlAWoyOILAbQMMFV","ln7NJr9HoqSHobiO","rnuKY7x5CoI4wor1","MEAMn3tCUKKQJI2S","570Gt6ZZ82wLaulV","ySNRvxngDlP55PKZ","fbjmhwOTQ1ihR8SY","vXJQAK1JaZQdqI4H","yP5vFTMKvekSQ8mi","PmqQaPnYh4rGFRls","CFwXmf2esSFBBGZ9","Cde5uCMcvkLmVIgp"],"version":"2.5.7"}},"author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367548421,"modifiedTime":1676937164299,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"h39kGeYbHCLxaip5"}
{"name":"ActorDescipttion for Item Piles","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","command":"game.actors.map(\n    x=>{\n        \n        if(x.folder != null && x.folder.name == \"Yartar\"){\n            console.log(\"AAA\", x.folder.name)\n\n            let actordesc = x.system.details.biography.value;\n            console.log(actordesc);\n             let data = {\n                 \"sellPriceModifier\": 0.2,\n                 \"buyPriceModifier\":2,\n                 \"purchaseOnly\": true,\n                 \"infiniteCurrencies\": false,\n                'description': actordesc,\n                \"deleteWhenEmpty\": false,\n                \"distance\": null,\n                \"keepZeroQuantity\": true,\n                \"openTimes\":{\n                    \"enabled\": true,\n                    \"status\": \"auto\",\n                    \"type\": \"merchant\",\n                    \"open\": {\n                        \"hour\": 9,\n                        \"minute\": 0\n                    },\n                    \"close\": {\n                        \"hour\": 18,\n                        \"minute\": 0\n                    }\n                }\n             }\n            //x.flags[\"item-piles\"].data = data;\n            x.setFlag('item-piles', 'data', data)\n            \n        }\n    }\n);","flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.jkMlV1Uf9hXl33IQ"},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1673825809993,"modifiedTime":1676937176970,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"jkMlV1Uf9hXl33IQ","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"SetSenses","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/magic/perception/eye-slit-orange.webp","command":"console.log(\"Args\", args);\nconst version = \"10.0.18\";\n//SetSenses \"basicSight\" 120\nlet lastArg = args[args.length - 1];\nlet tokenDetect = token.document.detectionModes;\nlet newTokenSense =\n{\n    \"id\": args[1],\n    \"enabled\": true,\n    \"range\": args[2]\n}\n\ntry {\n    let sansekey = await Object.keys(tokenDetect).find(key => tokenDetect[key].id == newTokenSense.id);\n    if (args[0] === \"on\") {\n        if (tokenDetect[sansekey] && tokenDetect[sansekey].enabled == true && tokenDetect[sansekey].range == newTokenSense.range) return;        \n        DAE.setFlag(actor, `SetSenses${args[1]}`, tokenDetect[sansekey])\n            .then(async () => {\n                if (tokenDetect[sansekey])\n                    tokenDetect[sansekey] = newTokenSense;\n                else\n                    tokenDetect.push(newTokenSense);\n                await token.document.update({\n                    detectionModes: tokenDetect\n                });\n                ChatMessage.create({ content: token.name + \" Recive a new detect mode: \" + newTokenSense.id });\n                console.log(`SetSenses${args[1]}`, tokenDetect);\n            });\n    }\n    if (args[0] === \"off\") {\n        const flag = DAE.getFlag(token, `SetSenses${args[1]}`);\n        if (!flag) {\n            delete tokenDetect[sansekey];\n        } else {\n            tokenDetect[sansekey] = flag;\n        }\n        await token.document.update({\n            detectionModes: tokenDetect\n        });\n        DAE.unsetFlag(actor, `SetSenses${args[1]}`);\n        ChatMessage.create({ content: token.name + \" loose detect mode: \" + newTokenSense.id });\n    }\n} catch (err) {\n    console.error(`SetSenses${args[1]} ${version}`, err);\n}","flags":{"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1671411045856,"modifiedTime":1676937124747,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"jx8KPyE6WpwTxM4U","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"CallLongRest","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/environment/settlement/tent.webp","command":"//Macro Roll item on buyer\nconst { buyer, seller, item, quantity } = args[0];\nconsole.log(\"comprador\",buyer);\nconst winRest = game.restrecovery.renderPromptRestInterface();","flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.ln7NJr9HoqSHobiO"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1674425762746,"modifiedTime":1676937164274,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"ln7NJr9HoqSHobiO","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RollTable: Orientation","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/tools/navigation/compass-brass-blue-red.webp","scope":"global","command":"game.tables.getName(\"Orientation\").draw();","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/d20-grey.svg","tooltip":"RollTable: Orientation","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.1rqDqtjNNPzhH73i"},"scene-packer":{"sourceId":"Macro.m2qz0W56msMmP3Rg","hash":"8af92b1dabb28079699919efb7a7ae5c83c7add7"},"advanced-macros":{"runAsGM":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302061576,"modifiedTime":1676937129981,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"m2qz0W56msMmP3Rg","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Update Loot-Consumable","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","scope":"global","command":"(async ()=>{\n    let changeFolder = 'Custom Foods';\n    let items = await game.items;\n    await items.map(x=>{\n        if(x.folder?.name == changeFolder ){\n          console.log(x.name);\n          x.update({type: 'consumable', 'data.consumableType': 'food', 'data.uses.autoDestroy': true});\n        }\n        \n    });\n    console.log(\"FIM\")\n})();\n\n\n\n\n    //await game.items.contents.map(item=>{\n        //if(item.name != null){\n        //console.log(item.folder.name)\n        //if(item.folder.name == changeFolder){\n           //console.log(\"Name\", item)\n        //item.update({type: 'consumable', 'data.consumableType': 'food', 'data.uses.autoDestroy': true});\n        //}\n        //}\n        \n    //})","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.cFmZEvLi38bkA8Xl"},"scene-packer":{"sourceId":"Macro.2n9IaMiIJX8laaxX","hash":"512b1f4c270a6426893e7f24089a6fe6db6f1234"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367288471,"modifiedTime":1676937176972,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"p52aQfFHOHzM7AbF","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Find Trap","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/skills/targeting/crosshair-ringed-gray.webp","scope":"global","command":"let actions = new InnocentiOpenLock.Actions('FindLockTrap');","flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.4MODdS79QhACoEd9"},"furnace":{"runAsGM":false},"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c"},"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.h1sM6gVa17vb4EPR","defaultPermission":2,"hash":"ee6bce8bdd40c4ce3eac9ea004133df46a9d00ab"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367324547,"modifiedTime":1676937100704,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"pYnbMuSIOh661zFk","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"AddConditionEffect","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/magic/symbols/cog-glowing-green.webp","command":"//Macro add Conditions\nconsole.log(\"PRONE\", args);\nconst lastArg = args[args.length - 1];\nif (lastArg.failedSaveUuids.length < 1) return;\nconst CE = game.dfreds.effectInterface;\nlet itemName = lastArg.item.name;\nconst condition = actor.flags['midi-qol'].optional[`${itemName}`]?.condition;\nconsole.log(\"PRONE\", itemName, condition);\nlastArg.failedSaveUuids.forEach(async target => {\n    CE.addEffect({ effectName: condition, uuid: target, origin: lastArg.itemUuid });\n});","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670124364846,"modifiedTime":1676937124751,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"qBvKSuhAe0q1b8JT","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000","name":"GM_DAE","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["qBvKSuhAe0q1b8JT","vx2C6POGKH7y6nRe","R19Z2kHOszaq4bUL","WtAzhtnD8hLPzwFZ","f11mXtuJRLleVw2K","ubZCi4QDQ3w5s4GK","Sg8Mf1aR7rN4HNZ3","vETCTqRQwPU5vWBw","vElYMQuPHeFgf9QL","B9OngQMVbredXG7r","jx8KPyE6WpwTxM4U","FeXF5sCoCmxLN2gs","RChxDQjpX4hTdIBn","stLs9i105Q4kkzpD","MUUCQ6yAWLlnzG3R"],"version":"2.5.7"}},"author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367560891,"modifiedTime":1676937124774,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"qzAEH9ikdVMCwOIn"}
{"name":"Change Rest Camp","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/settlement/tent.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Inn Pro\");","flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"hash":"a5d1d45fd369ef402b546298793b2389bd878736","sourceId":"Macro.KY12hUoVabb15Gy2"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937164278,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"rnuKY7x5CoI4wor1","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000","name":"GM_Generator","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["jkMlV1Uf9hXl33IQ","vM2Gav89KTvj3hkT","RelDIYCOduUswrnl","A1GmjLHcF6wwErm1","26YJeWQWF8LJcKkd","5P25VnQimErKQplg","p52aQfFHOHzM7AbF"],"version":"2.5.7"}},"author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367554473,"modifiedTime":1676937176985,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"sdT2RMWD5LX1xoeK"}
{"name":"TokenLightATE","type":"script","scope":"global","author":"Nz6IhKcjVxEf5RCK","img":"icons/sundries/lights/lantern-iron-lit-yellow.webp","command":"console.log(args);\n//TokenLightATE torch 40 20 0 0.5 3 3 false #d78a04 0.4\n\nlet ltype = args[1] ?? \"torch\";\nlet ldim = args[2] ?? 40;\nlet lbright = args[3] ?? 20;\nlet langle = args[4] ?? 0;\nlet llumi = args[5] ?? 0.5;\nlet lspeed = args[6] ?? 3;\nlet linten = args[7] ?? 3;\nlet lreverse = args[8] ?? false;\nlet lcolor = args[9] ?? '#d78a04';\nlet lcoloralfa = args[10] ?? 0.4;\n\nlet targets = canvas.tokens.controlled;\nlet torchAnimation = { \"type\": `${ltype}`, \"speed\": lspeed, \"intensity\": linten, \"reverse\": lreverse };\nconst data = { \"light.dim\": ldim, \"light.bright\": lbright, \"light.angle\": langle, \"light.luminosity\": llumi, \"light.animation\": torchAnimation, \"light.color\": lcolor, \"light.alpha\": lcoloralfa};\nif (args[0] == \"on\") {\n    for (let i = 0; i < targets.length; i++) {\n        targets[i].document.update(data);\n    }\n}\nif (args[0] == \"off\") {\n    let torchAnimationNone = { \"type\": 'none', \"speed\": 0, \"intensity\": 1, \"reverse\": false };\n    const datanone = { \"light.dim\": 0, \"light.bright\": 0, \"light.angle\": 0, \"light.luminosity\": 0.5, \"light.animation\": torchAnimationNone, \"light.color\": '', \"light.alpha\": 0.4 };\n        for (let i = 0; i < targets.length; i++) {\n        targets[i].document.update(datanone);\n    }\n}","flags":{"scene-packer":{"hash":"61f86632163483292a6b0869da966e9403ae72b5"},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668011862632,"modifiedTime":1676937124753,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"stLs9i105Q4kkzpD","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"FrightenedImmunity","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/svg/terror.svg","command":"//console.log(\"Frightened\", args);\nlet lastArg = args[args.length - 1];\nlet itemduration = lastArg.item.system.duration.value * 60;\nlet tokenDc = lastArg.item.system.save.dc;\nconst CE = game.dfreds.effectInterface;\nlet counterEffect = 'No Scary';\nlet activeEffect = 'Frightened';\nlet effect = CE.findEffectByName(`${activeEffect}`);\nlet counter = CE.findEffectByName(`${counterEffect}`);\neffect.changes.push({\n    key: \"flags.midi-qol.OverTime\",\n    value: `turn=end,\\nsaveDC=${tokenDc},\\nsaveAbility=wis,\\nlabel=${activeEffect},\\nmacro=FrightenedImmunity`,\n    mode: 0,\n    priority: 20\n});\neffect.seconds = itemduration;\ntry {\n    if (lastArg.hitTargetUuids.length > 0) {\n        lastArg.hitTargetUuids.forEach(async uuid => {\n            let token = await fromUuid(uuid, \"Token\");\n            let allCounter = await token.actor.effects.filter(x => x.name == counterEffect || x.label == counterEffect);\n            let allEffect = await token.actor.effects.filter(x => x.name == activeEffect || x.label == activeEffect);\n            if (lastArg.failedSaveUuids.includes(uuid)) {\n                if (allEffect.length > 0) {\n                    let hasEffect = allEffect.find(x => x.origin == lastArg.itemUuid);\n                    if (hasEffect) return;\n                }\n                if (allCounter.length > 0) {\n                    let hasCounter = allCounter.find(x => x.origin === lastArg.itemUuid);\n                    if (hasCounter) return;\n                }\n                if (lastArg.actorUuid == uuid) return;\n                await CE.addEffectWith({ effectData: effect, uuid: uuid, origin: lastArg.itemUuid });\n                await CE.addEffectWith({ effectData: counter, uuid: uuid, origin: lastArg.itemUuid });\n            }\n            if (lastArg.saveUuids.includes(uuid)) {\n                if (allCounter.length > 0) {\n                    let hasCounter = allCounter.find(x => x.origin == lastArg.itemUuid);\n                    if (hasCounter) return;\n                }\n                if (allEffect.length > 0) {\n                    let hasEffect = allEffect.find(x => x.origin == lastArg.itemUuid);\n                    if (hasEffect) return;\n                }                \n                if (lastArg.actorUuid == uuid) {\n                    if (allEffect.length > 0) {\n                        let itemListen = await fromUuid(lastArg.uuid, \"Item\");\n                        if (itemListen != null) return;\n                    }\n                }                \n                await CE.addEffectWith({ effectData: counter, uuid: uuid, origin: lastArg.itemUuid });\n            }\n        })\n\n    }\n} catch (err) {\n    console.error(`${activeEffect}`, err);\n}","flags":{"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670462560018,"modifiedTime":1676937124754,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"ubZCi4QDQ3w5s4GK","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Random Push","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/movement/arrow-upward-yellow.webp","scope":"global","command":"const lastArg = args[args.length-1];\nlet target = MidiQOL.MQFromUuid(lastArg.tokenUuid)\nconsole.log(\"ARGS\", args)\nif(args[0] == \"on\"){\n    let content = \"\";\n    let r = new Roll(\"1d8\");\n    await r.evaluate({async: true});\n    let dir = DirectionToken(r.total);\n    let chatData = {\n        speaker: ChatMessage.getSpeaker(),\n        content: `<p>${target.name} has pushed <strong>${args[1]}ft</strong> away in <strong><img src=\"assets/icons/arrows/${dir}.png\" width=\"15\"></strong></p>`\n    };\n    console.log(\"dir\", dir)\n    await ChatMessage.create(chatData, {});\n}\nfunction DirectionToken(result){\n    switch (result) {\n        case 1:\n            return \"north\"\n            break;\n        case 2:\n            return \"northeast\"\n            break;\n        case 3:\n            return \"east\"\n            break;\n        case 4:\n            return \"southeast\"\n            break;\n        case 5:\n            return \"south\"\n            break;\n        case 6:\n            return \"southwest\"\n            break;\n        case 7:\n            return \"west\"\n            break;\n        case 8:\n            return \"northwest\"\n            break;\n        \n        default:\n            // code\n    }\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.sUyvkun5YUI1P6i1"},"scene-packer":{"sourceId":"Macro.dYTypZmWa1pZx6pl"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937124758,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"vETCTqRQwPU5vWBw","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RecoveryExhaustian","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/life/crosses-trio-red.webp","scope":"global","command":"console.log(\"potion\", args)\ntry {\n    //const lastArg = args[args.length-1];\n    let xtarget = await fromUuid(args[0].hitTargetUuids[0]);\n    let recovery = parseInt(args[0].item.system.formula);\n    console.log(\"EXHAU\", xtarget, recovery  )\n    let exha = xtarget.system.attributes.exhaustion;\n\n    if (args[0].tag == \"OnUse\") {\n        //console.log(\"rest\",exha, recovery)\n        if (exha > 0) {\n            let nexha = ((exha - recovery) <= 0) ? 0 : (exha - recovery);\n            console.log(\"rest2\", exha, nexha)\n            await xtarget.update({ 'system.attributes.exhaustion': nexha });\n            ChatMessage.create({ content: `${args[0].item.name} reduce exhaustion to ${nexha}` });\n        } else {\n            ChatMessage.create({ content: `there is no exhaust to reduce with the ${args[0].item.name}` });\n        }\n    }\n} catch (err) {\n    console.error(`Recovery Exhaustion`, err);\n}","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.28pNe0cyfS1k6S3m"},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.zDnUqynFzGcx2uK2"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937124765,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"vElYMQuPHeFgf9QL","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"ActorDescipttion for Item Piles (Copy)","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","command":"game.actors.map(\n    x=>{\n        \n        if(x.folder != null && x.folder.name == \"Phandalin\"){\n            console.log(\"AAA\", x.folder.name)\n\n            let actordesc = x.system.details.biography.value;\n            console.log(actordesc);\n             let data = {\n                 \"sellPriceModifier\": 0.2,\n                 \"buyPriceModifier\":2,\n                 \"purchaseOnly\": true,\n                 \"infiniteCurrencies\": false,\n                'description': actordesc,\n                \"deleteWhenEmpty\": false,\n                \"distance\": null,\n                \"keepZeroQuantity\": true,\n                \"openTimes\":{\n                    \"enabled\": true,\n                    \"status\": \"auto\",\n                    \"type\": \"merchant\",\n                    \"open\": {\n                        \"hour\": 9,\n                        \"minute\": 0\n                    },\n                    \"close\": {\n                        \"hour\": 18,\n                        \"minute\": 0\n                    }\n                }\n             }\n            //x.flags[\"item-piles\"].data = data;\n            x.setFlag('item-piles', 'data', data)\n            \n        }\n    }\n);","flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.vM2Gav89KTvj3hkT"},"cf":{"id":"temp_wpfewcjlv2f","path":"GM_Generator","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1673825809993,"modifiedTime":1676937176974,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"vM2Gav89KTvj3hkT","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Light Torch","type":"script","author":"Nz6IhKcjVxEf5RCK","img":"icons/svg/fire.svg","scope":"global","command":"function tokenUpdate(data) {\n  let targets = canvas.tokens.controlled;\n  for( let i = 0; i < targets.length; i++) {\n    targets[i].document.update(data);\n  }\n}\n\nlet torchAnimation = {\"type\": \"torch\", \"speed\": 1, \"intensity\": 1, \"reverse\": false};\n\nlet noAnimation = {\"type\": \"none\", \"speed\": 5, \"intensity\": 5, \"reverse\": false};\n\nlet dialogEditor = new Dialog({\n  title: `Token Light Picker`,\n  content: `Pick the light source the selected token is holding.`,\n  buttons: {\n    none: {\n      label: `None`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 0, \"light.bright\": 0, \"light.angle\": 360,});\n        dialogEditor.render(true);\n      }\n    },\n    torch: {\n      label: `Torch`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 40, \"light.bright\": 20, \"light.angle\": 0, \"light.luminosity\": 0.5, \"light.animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    light: {\n      label: `Light cantrip`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 40, \"light.bright\": 20, \"light.angle\": 360, \"light.luminosity\": 0.5, \"light.animation\": noAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    lamp: {\n      label: `Lamp`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 45, \"light.bright\": 15, \"light.angle\": 360, \"light.luminosity\": 0.5, \"light.animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    bullseye: {\n      label: `Bullseye Lantern`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 120, \"light.bright\": 60, \"light.angle\": 45, \"light.luminosity\": 0.5, \"light.animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    hoodedOpen: {\n      label: `Hooded Lantern (Open)`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 60, \"light.bright\": 30, \"light.angle\": 360, \"light.luminosity\": 0.5, \"light.animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    hoodedClosed: {\n      label: `Hooded Lantern (Closed)`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 5, \"light.bright\": 0, \"light.angle\": 360, \"light.luminosity\": 0.5, \"light.animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    darkness: {\n      label: `Darkness spell`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 0, \"light.bright\": 15, \"light.angle\": 360, \"light.luminosity\": -0.15, \"light.animation\": noAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    candle: {\n      label: `Candle`,\n      callback: () => {\n        tokenUpdate({\"light.dim\": 10, \"light.bright\": 5, \"light.angle\": 0, \"light.luminosity\": 0.5, \"light.animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    close: {\n      icon: \"<i class='fas fa-tick'></i>\",\n      label: `Close`\n    },\n  },\n  default: \"close\",\n  close: () => {}\n});\n\ndialogEditor.render(true)","flags":{"core":{"sourceId":"Macro.mn5Tv7u1EOOnsHIy"},"scene-packer":{"sourceId":"Macro.mn5Tv7u1EOOnsHIy","defaultPermission":2,"hash":"3ad0dc805b9b8fafbcc96e55153a1f2ab3dcc168"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1666933719794,"modifiedTime":1676937164285,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"vXJQAK1JaZQdqI4H","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"ArmorDamages","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/melee/shield-damaged-broken-brown.webp","scope":"global","command":"let destroyOn = 10;\nlet setDamage = parseInt(args[1]) ?? -1;\nlet listitem = _token.actor.items.filter(x=>x.type == \"equipment\")\n.sort((a, b) => a.name.localeCompare(b.name))\n.map(x=>{\n    return `<option value=\"${x.uuid}\">${x.name}</option>`\n});\nlet formulario = \n    `<div>Personagem: ${_token.name} </div>\n    <div>\n        <label for=\"armorDamage\"> Seleciona a Arma:\n            <select id=\"armorDamage\" name=\"weaponDamage\">\n            ${listitem}\n            </select>\n        </label>\n    </div>\n    <div>\n        <label for=\"armorDamageNum\"> Dano:\n            <input id=\"armorDamageNum\" name=\"armorDamageNum\" type=\"number\" value=\"${setDamage}\"/>\n        </label>\n    <div>`;\nconsole.log(listitem.join(\"\"));\nlet dialog = new Dialog({\n    title: \"Danificar Armaduras\",\n    content: formulario,\n    buttons:{\n        one:{\n            icon:'<i class=\"fas fa-dice-d20\"></i>',\n            label:\"Usar\",\n            callback: async () => {\n                let aDamage = $(`#armorDamageNum`).val();\n                let armor = $(`#armorDamage option:selected`).val();\n                let armorName = $(`#armorDamage option:selected`).text();\n                let itemArmor = await MidiQOL.MQFromUuid(armor);\n                let armorValue = itemArmor.system.armor?.value ?? 11;\n                armorValue += parseInt(aDamage);\n                if(armorValue <= destroyOn){\n                    _token.actor.items.delete(itemArmor.id);\n                    let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Armor: <strong>${armorName}</strong> of ${_token.name} has destroyed`\n                };\n                ChatMessage.create(chatData, {});\n                    return;\n                }\n                await itemArmor.update({'data.armor.value': armorValue});\n                let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Weapon: <strong>${armorName}</strong> of ${_token.name} took the <strong>${aDamage} </strong> penalty`\n                    \n                };\n                ChatMessage.create(chatData, {});\n                \n            }\n        }\n    }\n});\n\ndialog.render(true);","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_3ht79ccry95","path":"GM_DAE","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.k9T83fD3ny2TvV2a"},"scene-packer":{"sourceId":"Macro.UxcSRDbxN5i0yt2a"},"exportSource":{"world":"foundry-template","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":null,"modifiedTime":1676937124768,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"vx2C6POGKH7y6nRe","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"#[CF_tempEntity]","type":"chat","command":"","flags":{"cf":{"id":"temp_fzrfr30fuxd","path":"Player Macros","color":"#e4950c","name":"Player Macros","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["5q0qXr2f9N0jIwJs","L0kGdrEIGVaLJ8vx","pYnbMuSIOh661zFk","PaaRtEc2soDDv8bd","VIBXKpwfeNST0634","OAf2omntQ45Q3GuV","BP0boqhwdDB69oKH","gO8FZ19UHpdp31Tn"],"version":"2.5.7"}},"author":"dMfobz2VOtfW25fX","img":"icons/svg/dice-target.svg","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1670367543771,"modifiedTime":1676937100716,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"w557AZJ9reenPIul"}
{"name":"RollItemOnBuyer_Callback","type":"script","scope":"global","author":"dMfobz2VOtfW25fX","img":"icons/skills/social/diplomacy-handshake.webp","command":"//Macro Roll item on buyer\nconst { buyer, seller, item, quantity } = args[0];\nnew MidiQOL.TrapWorkflow(seller, item, [buyer])","flags":{"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1674258291348,"modifiedTime":1676937164287,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"yP5vFTMKvekSQ8mi","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"Change Rest Wildness","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/environment/wilderness/tree-oak.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Wildness\");","flags":{"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.6EHyNhKiZxQTalIw","hash":"66d69718e9cc671e01b61d7f6ab9e995adf67a4d"},"cf":{"id":"temp_tu6dfscs5xo","path":"GM_Aux","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.6EHyNhKiZxQTalIw"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1668729680662,"modifiedTime":1676937164289,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"ySNRvxngDlP55PKZ","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
{"name":"RollTable: Charms & Gifts","type":"script","author":"dMfobz2VOtfW25fX","img":"icons/containers/boxes/box-gift-green.webp","scope":"global","command":"game.tables.getName(\"Charms and Gifts\").draw();","flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.zJI7JioCejYt5cou","hash":"976e6cfecdf72136951ec68d235792ca664eda41"},"cf":{"id":"temp_nj303iza5wo","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.zJI7JioCejYt5cou"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1669302061187,"modifiedTime":1676937129984,"lastModifiedBy":"dMfobz2VOtfW25fX"},"_id":"zJI7JioCejYt5cou","folder":null,"sort":0,"ownership":{"default":0,"dMfobz2VOtfW25fX":3}}
=======
{"_id":"1HEHANizlvSktfGi","name":"Update tokens to Actor","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"(async () => {\n  let updates = canvas.scene.data.tokens.map(t => {\n    let tactor = game.actors.entities.find(a => a.name === t.name);\n        if (tactor) {\n            return {\n                _id: t._id,\n                actorId: tactor.id\n            }\n        } else {\n            console.log(t.name);\n            return {\n                _id: t._id,\n                actorId: \"\"\n            }\n        }\n  });\n  await canvas.scene.updateEmbeddedEntity(\"Token\", updates);\n})();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_wf6q3oi631d","path":"Generators","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.P1yN1NvtrlEiVUAi"},"scene-packer":{"sourceId":"Macro.1HEHANizlvSktfGi","hash":"3c6147c7c79913fe235e522be29c50d572a0160b"}}}
{"_id":"28pNe0cyfS1k6S3m","name":"RecoveryExhaustian","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/life/crosses-trio-red.webp","scope":"global","command":"console.log(\"potion\",args)\n//const lastArg = args[args.length-1];\nlet target = MidiQOL.MQFromUuid(args[0].tokenUuid);\nlet recovery = parseInt(args[0].itemData.data.formula);\nlet exha = parseInt(target.actor.data.data.attributes.exhaustion);\nif(args[0].tag == \"OnUse\"){\n    console.log(\"rest\",exha, recovery)\n   if(recovery != 0){\n       exha = ((exha - recovery) < 0)?0:(exha - recovery);\n   }else{\n       exha = 0; \n   }\n   console.log(\"rest2\",exha, target)\n   await target.actor.update({\"data.attributes.exhaustion\":exha});\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.28pNe0cyfS1k6S3m","hash":"bea56b53f0bd29070b6e751857fc46409a1cfe84"},"cf":{"id":"temp_6k801fbgt6k","path":"DAE","color":"#800000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.zDnUqynFzGcx2uK2"}}}
{"_id":"2ccVqghN8LvCg0jS","name":"Set Elevation","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/mountain.svg","scope":"global","command":"let applyChanges = false;\n\nif(args && args.length>0){\nconsole.log(args);\n  let enterval=parseFloat(args[0]);\n  let exitval= args.length>1?parseFloat(args[1]):null;\n  let elevation=0;\n  if(event && event === MLT.ENTER)\n    elevation = enterval;\n  else if(event ** event === MLT.LEAVE)\n    elevation = exitval;\n    token.update({\n        \"elevation\": elevation\n    });\n}\nelse\n{\n    new Dialog({\n    title: `Token Elevation Changer`,\n    content: `\n      <form>\n        <div class=\"form-group\">\n          <label>Elevation Value:</label>\n          <input id=\"token-elevation\" name=\"token-elevation\" type=\"number\" step=\"1\" value=\"0\"/>\n        </div>\n      </form>\n      `,\n    buttons: {\n      yes: {\n        icon: \"<i class='fas fa-check'></i>\",\n        label: `Apply Changes`,\n        callback: () => applyChanges = true\n      },\n      no: {\n        icon: \"<i class='fas fa-times'></i>\",\n        label: `Cancel Changes`\n      },\n    },\n    default: \"yes\",\n    close: html => {\n      if (applyChanges) {\n        for ( let token of canvas.tokens.controlled ) {\n        let elevation = html.find('[name=\"token-elevation\"]')[0].value || \"0\";\n        token.document.update({\n            \"elevation\": parseFloat(elevation)\n        });\n        //token.data.elevation=parseInt(elevation);\n\n        }\n      }\n    }\n  }).render(true);\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"core":{"sourceId":"Macro.CpL3YgGgMfvubvuq"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"combat-utility-belt":{"macroTrigger":""},"scene-packer":{"sourceId":"Macro.2ccVqghN8LvCg0jS","hash":"115e491f81cd00e9ca2eb6b91b8cf839f63b7d4a"}}}
{"_id":"2n9IaMiIJX8laaxX","name":"Update Loot-Consumable","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"(async ()=>{\n    let changeFolder = 'Custom Foods';\n    let items = await game.items;\n    await items.map(x=>{\n        if(x.folder?.name == changeFolder ){\n          console.log(x.name);\n          x.update({type: 'consumable', 'data.consumableType': 'food', 'data.uses.autoDestroy': true});\n        }\n        \n    });\n    console.log(\"FIM\")\n})();\n\n\n\n\n    //await game.items.contents.map(item=>{\n        //if(item.name != null){\n        //console.log(item.folder.name)\n        //if(item.folder.name == changeFolder){\n           //console.log(\"Name\", item)\n        //item.update({type: 'consumable', 'data.consumableType': 'food', 'data.uses.autoDestroy': true});\n        //}\n        //}\n        \n    //})","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_wf6q3oi631d","path":"Generators","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.cFmZEvLi38bkA8Xl"},"scene-packer":{"sourceId":"Macro.2n9IaMiIJX8laaxX","hash":"512b1f4c270a6426893e7f24089a6fe6db6f1234"}}}
{"_id":"30PhNY9aJohOWp6j","name":"Absorb Elements","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/xge-absorb-elements.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Absorb Elements\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.30PhNY9aJohOWp6j"},"scene-packer":{"hash":"8618e263278a98c3d0667010c4abf1b07627b5b9","sourceId":"Macro.30PhNY9aJohOWp6j"}}}
{"_id":"473gSh9NG8ihacQu","name":"Update Cite Journal","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"const actorNames = game.actors.map(actor => actor.name).filter((value, index, self) => self.indexOf(value) === index);\nconst journalNames = game.journal.map(journal => journal.name).filter((value, index, self) => self.indexOf(value) === index);\n\nconst indexCite = {\n    Actor: actorNames,\n    JournalEntry: journalNames\n    }\n\ngame.journal.forEach(entry => {\n    //console.log(entry.entity)\n    if(entry.folder !== null && entry.folder.name !== \"UPDATE\") return;\n    let newcontent = entry.data.content;\n    for(const [key, value] of Object.entries(indexCite)){\n        let entityType = key;\n        for (let i = 0; i < value.length; i++) {\n            let strName = value[i];\n            let str = `(?!\\\\[)\\\\b${strName}\\\\b(?![\\\\w\\\\s]*[\\\\]\\\\}])`;\n            //let str = `\\\\b${strName}(?=[^\\\\}\\\\]\\\\w])`;\n            let regEx = new RegExp(str, 'g');\n            if(value[i] != entry.name){\n                //console.log(regEx);\n                if(newcontent == null) return;\n                newcontent = newcontent.replace(regEx, `@${entityType}[${value[i]}]{${value[i]}}`);\n            }else{\n               newcontent = newcontent.replace(regEx, `<strong>${value[i]}</strong>`); \n            }\n        }\n        //console.log(newcontent);\n        entry.update({ content: newcontent });\n    }\n    //console.log(newcontent);\nui.notifications.info(\"Atualizou as citações nos journals\")\n    console.log(\"FIM\");\n});\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Update Cite Journal","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"cf":{"id":"temp_wf6q3oi631d","path":"Generators","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.aJos5nKyMzGXkg0Y"},"scene-packer":{"sourceId":"Macro.473gSh9NG8ihacQu","hash":"10002c2cbe1d51f7521ebbd6d5a0ab5a9f77f2c2"}}}
{"_id":"4wT8rkOcuNJXshMy","name":"Mage Hand","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-mage-hand.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Mage Hand\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.4wT8rkOcuNJXshMy"},"scene-packer":{"hash":"8c5264260ab941c07a88867806a4cc9e2ec434bd","sourceId":"Macro.4wT8rkOcuNJXshMy"}}}
{"_id":"6EHyNhKiZxQTalIw","name":"Change Rest Wildness","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/wilderness/tree-oak.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Wildness\");","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.6EHyNhKiZxQTalIw","hash":"66d69718e9cc671e01b61d7f6ab9e995adf67a4d"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"6IRHTc9hefgA8V6G","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_wf6q3oi631d","path":"Generators","color":"#000000","name":"Generators","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["q8kAJglXUA6bYlga","473gSh9NG8ihacQu","2n9IaMiIJX8laaxX","1HEHANizlvSktfGi"],"version":"2.4.6"},"scene-packer":{"hash":"2fdbebc5a5503f45b300946e2dbf1dd112a318f7"}}}
{"_id":"7AMGrIYDPbSYOFlw","name":"Counterspell","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-counterspell.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Counterspell\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.7AMGrIYDPbSYOFlw"},"scene-packer":{"hash":"f2cef39ef8f735dc8a69e1c1d723fd7d276de3dd","sourceId":"Macro.7AMGrIYDPbSYOFlw"}}}
{"_id":"9Oj6culNDa8SiI5d","name":"RollTable: Confuse","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/control/hypnosis-mesmerism-swirl.webp","scope":"global","command":"game.tables.getName(\"Confusing Gaze\").draw();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.9Oj6culNDa8SiI5d","hash":"879bcab14e56f838f7bda8d7d44ed59b45e844c7"},"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000"}}}
{"_id":"BKQyN137XOS1Q3zF","name":"Change Prices","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/social/trading-injustice-scale-gray.webp","scope":"global","command":"await game.actors.map(x=>{\n    let merch = x.getFlag(\"lootsheetnpc5e\",\"lootsheettype\")\n    if(merch == \"Merchant\"){\n        let pricesFlag = x.getFlag(\"lootsheetnpc5e\", \"priceModifier\");\n        let priceModifier = {buy:50,sell:200}\n        x.setFlag(\"lootsheetnpc5e\",\"priceModifier\", priceModifier)\n    }\n})\n\nconsole.log(\"FIM\")\n//console.log(pricesFlag)","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.BKQyN137XOS1Q3zF"},"scene-packer":{"sourceId":"Macro.BKQyN137XOS1Q3zF","hash":"9dd6d638c695b1fb7dcabf9d175917cb9e41689d"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"BMElmXejoBWuZFXn","name":"WeaponsDamages","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/melee/sword-damaged-broken-red.webp","scope":"global","command":"let destroyOn = -5;\nlet setDamage = parseInt(args[1]) ?? -1\nlet listitem = _token.actor.items.filter(x=>x.type == \"weapon\" && x.data.data.properties?.mgc != true)\n.sort((a, b) => a.name.localeCompare(b.name))\n.map(x=>{\n    return `<option value=\"${x.uuid}\">${x.name}</option>`\n});\nlet formulario = \n    `<div>Personagem: ${_token.name} </div>\n    <div>\n        <label for=\"weapon\"> Seleciona a Arma:\n            <select id=\"weaponDamage\" name=\"weaponDamage\">\n            ${listitem}\n            </select>\n        </label>\n    </div>\n    <div>\n        <label for=\"weaponDamageNum\"> Dano:\n            <input id=\"weaponDamageNum\" name=\"weaponDamageNum\" type=\"number\" value=\"${setDamage}\"/>\n        </label>\n    <div>`;\nconsole.log(listitem.join(\"\"));\nlet dialog = new Dialog({\n    title: \"Danificar Armas\",\n    content: formulario,\n    buttons:{\n        one:{\n            icon:'<i class=\"fas fa-dice-d20\"></i>',\n            label:\"Usar\",\n            callback: async () => {\n                let wDamage = $(`#weaponDamageNum`).val();\n                let weapon = $(`#weaponDamage option:selected`).val();\n                let weaponName = $(`#weaponDamage option:selected`).text();\n                let itemWeapon = await MidiQOL.MQFromUuid(weapon);\n                let weaponFlag = itemWeapon.data.data.flags?.weapondamage?.hits ?? 0;\n                weaponFlag = parseInt(weaponFlag);\n                if(weaponFlag <= destroyOn){\n                    _token.actor.items.delete(itemWeapon.id);\n                    let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Weapon: <strong>${weaponName}</strong> of ${_token.name} has destroyed`\n                };\n                ChatMessage.create(chatData, {});\n                    return;\n                }\n                weaponFlag += parseInt(wDamage);\n                let rDamage = itemWeapon.data.data?.damage?.parts;\n                let nDamage = [];\n                if (rDamage.length > 0) {\n                    for (var i = 0; i < rDamage.length; i++) {\n                        nDamage.push([\"(\" + rDamage[i][0] + \")\" + wDamage, rDamage[i][1]])\n                    }\n                    await itemWeapon.update({'data.damage.parts': nDamage,'data.flags.weapondamage.hits': weaponFlag});\n                }\n                let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Weapon: <strong>${weaponName}</strong> of ${_token.name} took the <strong>${wDamage} </strong> penalty`\n                    \n                };\n                ChatMessage.create(chatData, {});\nconsole.log(\"SLE\", weaponFlag, itemWeapon.data.flags);\n                \n            }\n        }\n    }\n});\n\ndialog.render(true);","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_6k801fbgt6k","path":"DAE","color":"#800000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.mIMS1fQt9IE5UmtP"},"scene-packer":{"sourceId":"Macro.BMElmXejoBWuZFXn","hash":"d97442883052fb18d0f604b21cdf6fcac0baba71"}}}
{"_id":"EgDAgWYofU6ML3mZ","name":"Elemental Affinity","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/fire/flame-burning-fist-strike.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Elemental Affinity\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.EgDAgWYofU6ML3mZ"},"scene-packer":{"hash":"9a57985863676403f6b2a4356f2ede0ff3a9f576","sourceId":"Macro.EgDAgWYofU6ML3mZ"}}}
{"_id":"FNnYjjfOf91eG8rk","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_6k801fbgt6k","path":"DAE","color":"#800000","name":"DAE","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["UxcSRDbxN5i0yt2a","f92PqpCf4CSfTgAQ","dYTypZmWa1pZx6pl","28pNe0cyfS1k6S3m","BMElmXejoBWuZFXn"],"version":"2.4.6"},"scene-packer":{"hash":"9b3ecf1d4c0f47061b1400654a624043d2656b16"}}}
{"_id":"FQCEDyBx2ced8GrV","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000","name":"Roll Tables","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["zJI7JioCejYt5cou","cgj4qrbMWBr1K7bP","FbNYFqq0H9REoWC6","9Oj6culNDa8SiI5d","m2qz0W56msMmP3Rg","Y0NwMGiUXk0FqDah"],"version":"2.4.6"},"scene-packer":{"hash":"22be4db1c634585a9abbe89186b89a6010438883"}}}
{"_id":"FbNYFqq0H9REoWC6","name":"RollTable: Complications Research","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/sundries/books/book-embossed-gold-red.webp","scope":"global","command":"game.tables.getName(\"Complications Research\").draw();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/d20-grey.svg","tooltip":"RollTable: Research Complications","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.GCmalnLgLekr0TXS"},"scene-packer":{"sourceId":"Macro.FbNYFqq0H9REoWC6","hash":"a926f6933adf17eedbcc707e5cf46476990c08c2"}}}
{"_id":"GcVOEflEjYNnP6n2","name":"Give Money","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/commodities/currency/coins-plain-stack-gold.webp","scope":"global","command":"//Money Give/Remover\n\n(() => {\n\tlet targets = game.user.targets;\n\n\tlet targets_content = ``;\n\n\tfor (let target of targets) {\n\t\ttargets_content += `<img src=${target.data.img} width=\"50\" height=\"50\">`\n\t}\n\n\tlet dialog_content = `\n\t<div class = \"form-group\">\n\t\t<h1><img src=\"icons/commodities/currency/coins-plain-stack-gold.webp\" width=\"50px\" /> Golden Share</h1>\n\t\t<table style=\"width: 100%; text-align:center; border: 1px solid black\">\n\t\t  <tr>\n\t\t\t<thcolspan=\"2\">${targets_content}</th>\n\t\t  </tr>\n\t\t  <tr>\n\t\t\t<td><label for=\"pp\">Platnium<label></td>\n\t\t\t<td><input name=\"pp\" type =\"number\" value=\"0\" min=\"-999\" max=\"999\"></td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t\t<td><label for=\"gp\">Gold    <label></td>\n\t\t\t<td><input name=\"gp\" type =\"number\" value=\"0\" min=\"-999\" max=\"999\"></td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t\t<td><label for=\"ep\">Electrum<label></td>\n\t\t\t<td><input name=\"ep\" type =\"number\" value=\"0\" min=\"-999\" max=\"999\"></td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t\t<td><label for=\"sp\">Silver  <label></td>\n\t\t\t<td><input name=\"sp\" type =\"number\" value=\"0\" min=\"-999\" max=\"999\"></td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t\t<td><label for=\"cp\">Copper  <label></td>\n\t\t\t<td><input name=\"cp\" type =\"number\" value=\"0\" min=\"-999\" max=\"999\"></td>\n\t\t  </tr>\n\t\t</table>\n\t</div>`;\n\n\tnew Dialog({\n\t\tcontent: dialog_content,\n\t\tbuttons:\n\t\t{\n\t\t\tOk: { icon: ``, label: `Change Money.`, callback: (html) => changeMoney(targets, html) }\n\t\t}\n\t}).render(true);\n})();\n\nasync function changeMoney(targets, html) {\n\tlet difference_money = {\n\t\tpp: parseInt(html.find('[name=pp]')[0].value),\n\t\tgp: parseInt(html.find('[name=gp]')[0].value),\n\t\tep: parseInt(html.find('[name=ep]')[0].value),\n\t\tsp: parseInt(html.find('[name=sp]')[0].value),\n\t\tcp: parseInt(html.find('[name=cp]')[0].value)\n\t}\n\n\t//divide update_money based on # of targets\n\tdifference_money = divideValue(difference_money, targets.size);\n\n\t//get rid of \"extra\" stuff, display all names in header\n\tlet actor_content = ``;\n\tfor (let target of targets) { actor_content += `${target.actor.name}, `; }\n\n\tlet table_content = ``;\n\tfor (let key in difference_money) {\n\t\tif (difference_money[key] !== 0)\n\t\t\ttable_content += `<tr><td>${key} :</td><td>${difference_money[key]}</td></tr>`\n\t}\n\n\tlet content = `\n\t<h2><img src=\"icons/commodities/currency/coins-plain-stack-gold.webp\" width=\"50px\" /> Add Money</h2>\n\t<table style \"width: 100%; text-align:center; border: 1px solid black\">\n\t\t<tr>\n\t\t  <th colspan=\"2\">Money Change :</th>\n\t\t</tr>\n\t\t<tr>\n\t\t  <th colspan=\"2\">${actor_content}</th>\n\t\t</tr>\n\t\t${table_content}\n\t</table>`;\n\n\tfor (let target of targets) {\n\t\tlet original_money = duplicate(target.actor.data.data.currency);\n\t\tlet update_money = changeValue(original_money, difference_money);\n\n\t\tawait target.actor.update({ \"data.currency\": update_money });\n\t}\n\n\tChatMessage.create({ content, speaker: ChatMessage._getSpeakerFromUser({ user: game.user }) })\n}\n\nfunction changeValue(Original, Difference) {\n\tlet Update = { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0 };\n\n\tfor (let key in Original) {\n\t\tUpdate[key] = Original[key] + Difference[key];\n\t\tif (Update[key] < 0) {\n\t\t\tswitch (key) {\n\t\t\t\tcase \"cp\":\n\t\t\t\t\tif (Update[\"sp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"cp\"] += 10;\n\t\t\t\t\t\tUpdate[\"sp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"ep\"] > 0) {\n\t\t\t\t\t\tUpdate[\"cp\"] += 50;\n\t\t\t\t\t\tUpdate[\"ep\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"gp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"cp\"] += 100;\n\t\t\t\t\t\tUpdate[\"gp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"pp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"cp\"] += 1000;\n\t\t\t\t\t\tUpdate[\"pp\"] -= 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Not enough money to do that.`);\n\t\t\t\t\t}\n\t\t\t\t\tUpdate = changeValue(Update, { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"sp\":\n\t\t\t\t\tif (Update[\"ep\"] > 0) {\n\t\t\t\t\t\tUpdate[\"sp\"] += 5;\n\t\t\t\t\t\tUpdate[\"ep\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"gp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"sp\"] += 10;\n\t\t\t\t\t\tUpdate[\"gp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"pp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"sp\"] += 100;\n\t\t\t\t\t\tUpdate[\"pp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"cp\"] > 9) {\n\t\t\t\t\t\tUpdate[\"sp\"] += 1;\n\t\t\t\t\t\tUpdate[\"cp\"] -= 10;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Not enough money to do that.`);\n\t\t\t\t\t}\n\t\t\t\t\tUpdate = changeValue(Update, { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ep\":\n\t\t\t\t\tif (Update[\"gp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"ep\"] += 2;\n\t\t\t\t\t\tUpdate[\"gp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"pp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"ep\"] += 20;\n\t\t\t\t\t\tUpdate[\"pp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"sp\"] > 4) {\n\t\t\t\t\t\tUpdate[\"ep\"] += 1;\n\t\t\t\t\t\tUpdate[\"sp\"] -= 5;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"cp\"] > 49) {\n\t\t\t\t\t\tUpdate[\"ep\"] += 1;\n\t\t\t\t\t\tUpdate[\"cp\"] -= 50;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Not enough money to do that.`);\n\t\t\t\t\t}\n\t\t\t\t\tUpdate = changeValue(Update, { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"gp\":\n\t\t\t\t\tif (Update[\"pp\"] > 0) {\n\t\t\t\t\t\tUpdate[\"gp\"] += 10;\n\t\t\t\t\t\tUpdate[\"pp\"] -= 1;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"ep\"] > 1) {\n\t\t\t\t\t\tUpdate[\"gp\"] += 1;\n\t\t\t\t\t\tUpdate[\"ep\"] -= 2;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"sp\"] > 9) {\n\t\t\t\t\t\tUpdate[\"gp\"] += 1;\n\t\t\t\t\t\tUpdate[\"sp\"] -= 10;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"cp\"] > 99) {\n\t\t\t\t\t\tUpdate[\"gp\"] += 1;\n\t\t\t\t\t\tUpdate[\"cp\"] -= 100;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Not enough money to do that.`);\n\t\t\t\t\t}\n\t\t\t\t\tUpdate = changeValue(Update, { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0 });\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pp\":\n\t\t\t\t\tif (Update[\"gp\"] > 9) {\n\t\t\t\t\t\tUpdate[\"pp\"] += 1;\n\t\t\t\t\t\tUpdate[\"gp\"] -= 10;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"ep\"] > 19) {\n\t\t\t\t\t\tUpdate[\"pp\"] += 1;\n\t\t\t\t\t\tUpdate[\"ep\"] -= 20;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"sp\"] > 99) {\n\t\t\t\t\t\tUpdate[\"pp\"] += 1;\n\t\t\t\t\t\tUpdate[\"sp\"] -= 100;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Update[\"cp\"] > 999) {\n\t\t\t\t\t\tUpdate[\"pp\"] += 1;\n\t\t\t\t\t\tUpdate[\"cp\"] -= 1000;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Not enough money to do that.`);\n\t\t\t\t\t}\n\t\t\t\t\tUpdate = changeValue(Update, { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0 });\n\t\t\t}\n\t\t}\n\t}\n\treturn Update;\n}\n\nfunction divideValue(Object, Value) {\n\tif (Value === 1) return Object;\n\tlet remainder = 0;\n\tlet Update = { pp: 0, gp: 0, ep: 0, sp: 0, cp: 0, remainder: 0 };\n\n\tfor (let key in Object) {\n\t\tUpdate[key] = Object[key] + remainder;\n\t\tremainder = Object[key] % Value;\n\t\tif (Update[key] > 0) Update[key] = Math.floor(Update[key] / Value);\n\t\tif (Update[key] < 0) Update[key] = Math.ceil(Update[key] / Value);\n\t\tif (remainder !== 0) {\n\t\t\tif (key === \"ep\") { remainder *= 5; }\n\t\t\telse if (key === \"gp\") { remainder *= 2; }\n\t\t\telse { remainder *= 10; }\n\t\t}\n\t}\n\tUpdate.remainder = remainder / 10;\n\treturn Update;\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.HI20CS5Fh4z0goab"},"scene-packer":{"sourceId":"Macro.GcVOEflEjYNnP6n2","hash":"55cf10edf510e3d1149a297914e28edf19d35abe"}}}
{"_id":"IdegeCeEnMvda87v","name":"Advantage Check","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"console.log(\"Args\", args)","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.IdegeCeEnMvda87v","hash":"8ead9cac2229f6af4e42ac90174e072c51f461a6"},"cf":{"id":"temp_18z1omjp318","path":"Automação Master","color":"#0080ff"}}}
{"_id":"IkcVSqbWaT2wdm0A","name":"Visitar","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/settlement/house-farmland-small.webp","scope":"global","command":"let visitar = InnocentiWorld.Visitar();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/hanging-sign.svg","tooltip":"Visitar","colour":"#80ff80","trigger":""}},"cf":{"id":"temp_6n1q977fuuk","path":"Player Macros","color":"#e4950c"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.AN84WHe2g38no7vo"},"scene-packer":{"sourceId":"Macro.IkcVSqbWaT2wdm0A","defaultPermission":2,"hash":"78825d34e17be363575b86c876a36ccd3cfc97f7"}}}
{"_id":"JfLeCU9xKKJ4YIC8","name":"Shield","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-shield.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Shield\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.JfLeCU9xKKJ4YIC8"},"scene-packer":{"hash":"2b4b39fc736d36a3c87d4d14005a4d61056cb6fe","sourceId":"Macro.JfLeCU9xKKJ4YIC8"}}}
{"_id":"K8NDRp6l1L1VW0FV","name":"Change Rest Inn","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/settlement/house-woods.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Inn\");","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.K8NDRp6l1L1VW0FV","hash":"0bce8e0aff4ecb0b064f63e6bd03dac0f8bd7d6c"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"KNnRPGXMDdlPCTND","name":"Wall of Fire","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/fire/barrier-wall-flame-ring-yellow.webp","scope":"actor","command":"const baseItem = actor?.items.getName(\"Wall of Fire\");\nconst tempItem = actor?.items.getName(\"Wall of Fire Damage\");\nconst shift = game.keyboard.isModifierActive(\"Shift\");\ntempItem && !shift ? tempItem.roll() : baseItem ? baseItem.roll() : ui.notifications.warn(`Item not found.`);","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.KNnRPGXMDdlPCTND"},"scene-packer":{"hash":"cb333dd6d79406cc60174b955e43413bfee448eb","sourceId":"Macro.KNnRPGXMDdlPCTND"}}}
{"_id":"KY12hUoVabb15Gy2","name":"Change Rest Camp","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/settlement/tent.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Inn Pro\");","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"hash":"a5d1d45fd369ef402b546298793b2389bd878736","sourceId":"Macro.KY12hUoVabb15Gy2"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"N4mEhbpUMOQDasWm","name":"Fireball","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-fireball.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Fireball\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.N4mEhbpUMOQDasWm"},"scene-packer":{"hash":"321467890e64c2fa168419b48f28dee1f4deb56b","sourceId":"Macro.N4mEhbpUMOQDasWm"}}}
{"_id":"NHTDmWtQsz093Y1J","name":"Wand of Magic Missiles","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/weapons/staves/staff-ornate-engraved-blue.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Wand of Magic Missiles\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.NHTDmWtQsz093Y1J"},"scene-packer":{"hash":"db306f3ff0271d18dd2704554561007668ba9754","sourceId":"Macro.NHTDmWtQsz093Y1J"}}}
{"_id":"NgiKr3KtPhnAoSXq","name":"Pular","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/movement/arrows-up-trio-red.webp","scope":"global","command":"var myStr = _token.actor.data.data.abilities.str;\nvar ftDist = myStr.value / 2;\nvar ftDisRun = myStr.value;\nvar ftAlt = (myStr.mod +3)/2;\nvar ftAltRun = myStr.mod+3;\nlet results_html = `<h1>Salto à Distância</h1><p>Correndo +10 ft: <strong> ${ftDisRun} ft </strong></p><p>Parado: <strong> ${ftDist} ft </strong></p><p>Magia Jump: <strong>${ftDisRun*3} ft/ ${ftDist*3} ft</strong></p><p>Aterrissando em terreno dificil deve fazer um <strong>teste de Destreza CD 10</strong> para não cair</p><h1>Salto em Altura</h1><p>Correndo +10 ft: <strong> ${ftAltRun} ft </strong></p><p>Parado: <strong> ${ftAlt} ft </strong></p><p>Magia Jump: <strong>${ftAltRun*3} ft/ ${ftAlt*3} ft</strong></p><p>as mãos alcançam a somatoria de sua area de ameaça (padrão +5 ft)</p><hr><p>o valor é descontado do seu total de movimento</p>`\nChatMessage.create({\nuser: game.user._id,\nspeaker: ChatMessage.getSpeaker({token: actor}),\ncontent: results_html\n});","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.NgiKr3KtPhnAoSXq","defaultPermission":2,"hash":"66a6a97d5b3f2d123cbd98fbc5aa2dc4db1cbbd4"},"cf":{"id":"temp_6n1q977fuuk","path":"Player Macros","color":"#e4950c"}}}
{"_id":"Oy8J0SwfrVlY1F02","name":"ReduceTokenSize","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/degen.svg","scope":"global","command":"_token.document.update({ \"width\": 0.7, \"height\": 0.7 })","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.9RmkB9ho3xMdKx3o"},"scene-packer":{"sourceId":"Macro.Oy8J0SwfrVlY1F02","hash":"3f70744b245168310f6d2bef7e4179afb7eadad7"}}}
{"_id":"PPrpyeGEUXcIotUZ","name":"Change Rest Dungeon","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/wilderness/tomb-entrance.webp","scope":"global","command":"await game.restrecovery.setActiveProfile(\"Dungeon\");","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"advanced-macros":{"runAsGM":true},"scene-packer":{"hash":"e4cda2178ce277ab9d4cedfd1eebdb206975eaf3","sourceId":"Macro.PPrpyeGEUXcIotUZ"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"PskK0W47uTl897ri","name":"Clima-Clear","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/windmill.svg","scope":"global","command":"Hooks.call('fxmaster.updateWeather', [{}]);\nFXMASTER.filters.setFilters([{}]);","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"scene-packer":{"hash":"f0ba817a41ef4a239be5e74547b1d2d26cbd748d","sourceId":"Macro.PskK0W47uTl897ri"},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_09kfjnyyjyax","path":"Climas","color":"#000000"}}}
{"_id":"QOAQEHqTlD8Du2ap","name":"Encounter","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/environment/wilderness/mine-interior-dungeon-door.webp","scope":"global","command":"let encounter = new InnocentiWorld.Encounters();\nlet tableName = `Encounter ${game.scenes.active.name}`\nawait encounter.RollTable(tableName)","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.YnoukCtSVrv8t8XZ"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"scene-packer":{"sourceId":"Macro.QOAQEHqTlD8Du2ap","hash":"e57d55f45c9595c62435d738e62c00831c6812f8"}}}
{"_id":"R2uxxQ2qKBP3EZJE","name":"Metamagic: Empowered Spell","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/lightning/bolt-strike-explosion-blue.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Metamagic: Empowered Spell\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.R2uxxQ2qKBP3EZJE"},"scene-packer":{"hash":"aa53b208c9121148f87e39a39c4fe7e694ee3559","sourceId":"Macro.R2uxxQ2qKBP3EZJE"}}}
{"_id":"R5czVVhTUzSbOrRz","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_09kfjnyyjyax","path":"Climas","color":"#000000","name":"Climas","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["PskK0W47uTl897ri","kHCj12QNucFK4jJ0"],"version":"2.4.6"},"scene-packer":{"hash":"e84f40834fade97b91670736f044fe51c09fb314"}}}
{"_id":"UxcSRDbxN5i0yt2a","name":"ArmorDamages","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/melee/shield-damaged-broken-brown.webp","scope":"global","command":"let destroyOn = 10;\nlet setDamage = parseInt(args[1]) ?? -1;\nlet listitem = _token.actor.items.filter(x=>x.type == \"equipment\" && x.data.data.properties?.mgc != true)\n.sort((a, b) => a.name.localeCompare(b.name))\n.map(x=>{\n    return `<option value=\"${x.uuid}\">${x.name}</option>`\n});\nlet formulario = \n    `<div>Personagem: ${_token.name} </div>\n    <div>\n        <label for=\"armorDamage\"> Seleciona a Arma:\n            <select id=\"armorDamage\" name=\"weaponDamage\">\n            ${listitem}\n            </select>\n        </label>\n    </div>\n    <div>\n        <label for=\"armorDamageNum\"> Dano:\n            <input id=\"armorDamageNum\" name=\"armorDamageNum\" type=\"number\" value=\"${setDamage}\"/>\n        </label>\n    <div>`;\nconsole.log(listitem.join(\"\"));\nlet dialog = new Dialog({\n    title: \"Danificar Armaduras\",\n    content: formulario,\n    buttons:{\n        one:{\n            icon:'<i class=\"fas fa-dice-d20\"></i>',\n            label:\"Usar\",\n            callback: async () => {\n                let aDamage = $(`#armorDamageNum`).val();\n                let armor = $(`#armorDamage option:selected`).val();\n                let armorName = $(`#armorDamage option:selected`).text();\n                let itemArmor = await MidiQOL.MQFromUuid(armor);\n                let armorValue = itemArmor.data.data.armor?.value ?? 11;\n                armorValue += parseInt(aDamage);\n                if(armorValue <= destroyOn){\n                    _token.actor.items.delete(itemArmor.id);\n                    let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Armor: <strong>${armorName}</strong> of ${_token.name} has destroyed`\n                };\n                ChatMessage.create(chatData, {});\n                    return;\n                }\n                await itemArmor.update({'data.armor.value': armorValue});\n                let chatData = {\n                    speaker: ChatMessage.getSpeaker(),\n                    content: `The Weapon: <strong>${armorName}</strong> of ${_token.name} took the <strong>${aDamage} </strong> penalty`\n                    \n                };\n                ChatMessage.create(chatData, {});\n                \n            }\n        }\n    }\n});\n\ndialog.render(true);","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_6k801fbgt6k","path":"DAE","color":"#800000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.k9T83fD3ny2TvV2a"},"scene-packer":{"sourceId":"Macro.UxcSRDbxN5i0yt2a","hash":"c66ec2a6dd30881453c096698e9fab6af668ae28"}}}
{"_id":"WMHDME6nmzIn3nyB","name":"GM All ShortRest","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"async function CustomShortRest(){\n    let macroActors = game.actors.filter(a => a.data.type == \"character\");\n    for (let macroActor of macroActors) {  \n        await macroActor.shortRest({dialog: true, chat: true, newDay: false});\n    } \n}  \nCustomShortRest();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"scene-packer":{"hash":"6e3e2091d3b7a8b2196a01bb958d980e2d5cf976","sourceId":"Macro.WMHDME6nmzIn3nyB"},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.nj8aY6THzO2hCB8E"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"X10DukjUN15Aogpw","name":"Update Unlinked Tokens to Actors","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"(async () => {\n    let aName = \"Bullywug\";\n    let tactor = game.actors.getName(aName);\n    let tokens = canvas.tokens.controlled;\n    for (var tok of canvas.tokens.controlled) {\n        tok.update({actorId: tactor._id})\n       console.log(tok)\n    }\n    \n})();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.egoPB0H7IIZFYlyA"},"scene-packer":{"sourceId":"Macro.X10DukjUN15Aogpw","hash":"cd8cfc58ffc68c7adf9dcac5b3772cb35fa9bda2"}}}
{"_id":"Y0NwMGiUXk0FqDah","name":"RollTable: Segredos dos Personagens","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/sundries/books/book-red-exclamation.webp","scope":"global","command":"game.tables.getName(\"Segredos dos Personagens\").draw();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.O44VSFhNABFnWEKn"},"scene-packer":{"sourceId":"Macro.Y0NwMGiUXk0FqDah","hash":"256d09eb8fa6fce6c1d847a555f2ade76158975e"}}}
{"_id":"YF5eKuKN2jMSNIhC","name":"Looting","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/commodities/currency/coins-patched-pouch-white.webp","scope":"global","command":"let action = new InnocentiLoot.Loot();\nawait action.Check();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"core":{"sourceId":"Macro.4EF55MrKqHBYzI0m"},"combat-utility-belt":{"macroTrigger":""},"cf":{"id":"temp_6n1q977fuuk","path":"Player Macros","color":"#e4950c"},"scene-packer":{"sourceId":"Macro.YF5eKuKN2jMSNIhC","defaultPermission":2,"hash":"4f861f6d2702d04a2db8be6fd15a708bd2be193f"}}}
{"_id":"YiTEtg1VzxZDNXg5","name":"Aganazzar's Scorcher","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/fire/beam-jet-stream-trails-orange.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Aganazzar's Scorcher\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.YiTEtg1VzxZDNXg5"},"scene-packer":{"hash":"a4ca338e6b8f51c98ba4072030864d82affca2d3","sourceId":"Macro.YiTEtg1VzxZDNXg5"}}}
{"_id":"YzCgeVWBIQi4eyBy","name":"Shocking Grasp","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-shocking-grasp.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Shocking Grasp\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.YzCgeVWBIQi4eyBy"},"scene-packer":{"hash":"84b429d808d04fdba439a3f1576d0a6c89458305","sourceId":"Macro.YzCgeVWBIQi4eyBy"}}}
{"_id":"Zgma5y5sBfS8HC6t","name":"Chenge Status to Hostil","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"let tokens = canvas.tokens.controlled;\nfor (var i = 0; i < tokens.length; i++) {\n    //console.log(\"TOK\",tokens[i])\n    let dispo = (tokens[i].data.disposition == -1)? 1:-1\n    await tokens[i].document.update({'disposition': dispo});\n}\nconsole.log(\"END\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.Zgma5y5sBfS8HC6t","hash":"ed342b4c514d705d4dd55e6a5f69a9e8ca4b728a"},"cf":{"id":"temp_18z1omjp318","path":"Automação Master","color":"#0080ff"}}}
{"_id":"axlHiTSToXTc17Ko","name":"Metamagic: Twinned Spell","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/light/beams-explosion-blue.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Metamagic: Twinned Spell\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.axlHiTSToXTc17Ko"},"scene-packer":{"hash":"0052ab8ceef284a012a0ace3aea0b9b1293d9eb3","sourceId":"Macro.axlHiTSToXTc17Ko"}}}
{"_id":"bY9xXiGEjz0IXLVt","name":"Set Patrol","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"await canvas.tokens.controlled.forEach(x=>{\n    canvas.tokens.documentCollection.map(y=>{\n        if(y.uuid == x.document.uuid){\n            let patrol = y.getFlag(\"patrol\",\"enablePatrol\") ?? false;\n            let spoot = y.getFlag(\"patrol\",\"enableSpotting\") ?? false;\n            y.setFlag(\"patrol\",\"enablePatrol\", !patrol);\n            y.setFlag(\"patrol\",\"enableSpotting\", !spoot);\n           //console.log(\"Name\", patrol); \n        }\n    });\n    ui.notifications.info(\"Todos patrulhando\");\n});","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.ZKDvu595QoETNUPa"},"scene-packer":{"sourceId":"Macro.bY9xXiGEjz0IXLVt","hash":"1e3376b791011c4d4ca0ddbd22d360bd87d11502"}}}
{"_id":"cgj4qrbMWBr1K7bP","name":"RollTable: Complications","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/death/undead-skeleton-deformed-red.webp","scope":"global","command":"game.tables.getName(\"Complications\").draw();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/d20-grey.svg","tooltip":"RollTable: Complications","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.HEbMljxKEOZBEgYp"},"scene-packer":{"sourceId":"Macro.cgj4qrbMWBr1K7bP","hash":"cda5fedb9ab8727466d268e1e7eb85a83eb4fc0c"}}}
{"_id":"dYTypZmWa1pZx6pl","name":"Random Push","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/movement/arrow-upward-blue.webp","scope":"global","command":"const lastArg = args[args.length-1];\nlet target = MidiQOL.MQFromUuid(lastArg.tokenUuid)\nconsole.log(\"ARGS\", args)\nif(args[0] == \"on\"){\n    let content = \"\";\n    let r = new Roll(\"1d8\");\n    await r.evaluate({async: true});\n    let dir = DirectionToken(r.total);\n    let chatData = {\n        speaker: ChatMessage.getSpeaker(),\n        content: `<p>${target.name} has pushed <strong>${args[1]}ft</strong> away in <strong><img src=\"assets/icons/arrows/${dir}.png\" width=\"15\"></strong></p>`\n    };\n    console.log(\"dir\", dir)\n    await ChatMessage.create(chatData, {});\n}\nfunction DirectionToken(result){\n    switch (result) {\n        case 1:\n            return \"north\"\n            break;\n        case 2:\n            return \"northeast\"\n            break;\n        case 3:\n            return \"east\"\n            break;\n        case 4:\n            return \"southeast\"\n            break;\n        case 5:\n            return \"south\"\n            break;\n        case 6:\n            return \"southwest\"\n            break;\n        case 7:\n            return \"west\"\n            break;\n        case 8:\n            return \"northwest\"\n            break;\n        \n        default:\n            // code\n    }\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_6k801fbgt6k","path":"DAE","color":"#800000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.sUyvkun5YUI1P6i1"},"scene-packer":{"sourceId":"Macro.dYTypZmWa1pZx6pl","hash":"54622682168e7e634f48ceb5d4db85042f1643b4"}}}
{"_id":"f92PqpCf4CSfTgAQ","name":"DAEDamage","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/wounds/blood-spurt-spray-red.webp","scope":"global","command":"// DAEDamage damege type\nconst lastArg = args[args.length-1];\nlet atype = args[2]\nlet adamage = args[1]\nconsole.log(\"DAMAGE\", args)\nif (args[0] == \"on\") {\n    console.log(\"DAMAGE\", lastArg)\n    let ttoken = await fromUuid(lastArg.tokenUuid); // better since it gets the token no matter what scene it is on\n    let casterItem = await fromUuid(lastArg.origin); // better since it gets the item on the synthetic actor\n    let aactor = casterItem.actor;\n    if (aactor.uuid === lastArg.actorUuid) return; // don't trigger on the troll\n    let damageRoll = new Roll(adamage).roll({async:false});\n    console.log(\"DAMAGE\", ttoken)\n    new MidiQOL.DamageOnlyWorkflow(aactor,token,damageRoll.total,atype,[ttoken], damageRoll,{itemCardId: \"new\", itemData:casterItem.data});\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_6k801fbgt6k","path":"DAE","color":"#800000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.BZ6YM0xXTdzVvLey"},"scene-packer":{"sourceId":"Macro.f92PqpCf4CSfTgAQ","hash":"3f67c7165ef4da6c406e75d6e2116d0b4e1b5586"}}}
{"_id":"gVuSQtHn76QzFk1P","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_ce296qgq9ro","path":"Players Folder","color":"#000000","name":"Players Folder","children":["temp_xb47pdgsbyc"],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":[],"version":"2.4.6"},"scene-packer":{"hash":"c44a1434d1b0a7f9d63861c72d81adce950dd042"}}}
{"_id":"gq68VI0rpGpV52ue","name":"Minor Illusion","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-minor-illusion.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Minor Illusion\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.gq68VI0rpGpV52ue"},"scene-packer":{"hash":"b3d9229c9183bb328676904da9cb2c3713942058","sourceId":"Macro.gq68VI0rpGpV52ue"}}}
{"_id":"h1sM6gVa17vb4EPR","name":"Find Trap","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/skills/targeting/crosshair-ringed-gray.webp","scope":"global","command":"let actions = new InnocentiOpenLock.Actions('FindLockTrap');","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.4MODdS79QhACoEd9"},"furnace":{"runAsGM":false},"cf":{"id":"temp_6n1q977fuuk","path":"Player Macros","color":"#e4950c"},"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.h1sM6gVa17vb4EPR","defaultPermission":2,"hash":"ee6bce8bdd40c4ce3eac9ea004133df46a9d00ab"}}}
{"_id":"icqAbAb5qCHQYdG2","name":"Misty Step","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-misty-step.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Misty Step\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.icqAbAb5qCHQYdG2"},"scene-packer":{"hash":"711067212dc9d5d1853e31a8659b1eb1fcee10fc","sourceId":"Macro.icqAbAb5qCHQYdG2"}}}
{"_id":"k2kzKz8gTxKgQHJ5","name":"Hypnotic Pattern","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/air/air-burst-spiral-pink.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Hypnotic Pattern\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.k2kzKz8gTxKgQHJ5"},"scene-packer":{"hash":"048feea1db247a2ef0ffe38609701355d61ca519","sourceId":"Macro.k2kzKz8gTxKgQHJ5"}}}
{"_id":"kHCj12QNucFK4jJ0","name":"Clima-Tempestade","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/windmill.svg","scope":"global","command":"Hooks.call('fxmaster.updateWeather', [{\"type\":\"raintop\",\"options\":{\"scale\":1.4,\"speed\":2.3,\"lifetime\":1.4,\"density\":0.5,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}}]);\nFXMASTER.filters.setFilters([{\"type\":\"lightning\",\"options\":{\"frequency\":830,\"spark_duration\":300,\"brightness\":1.3}},{\"type\":\"color\",\"options\":{\"color\":{\"apply\":true,\"value\":\"#555353\"},\"saturation\":0.7,\"contrast\":1,\"brightness\":1,\"gamma\":0.5,\"red\":0.3333333333333333,\"green\":0.3254901960784314,\"blue\":0.3254901960784314}}]);","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"scene-packer":{"hash":"90938ee8313864c31e9e54d363591e39a7085b40","sourceId":"Macro.kHCj12QNucFK4jJ0"},"advanced-macros":{"runAsGM":true},"cf":{"id":"temp_09kfjnyyjyax","path":"Climas","color":"#000000"}}}
{"_id":"l9Hpr6zVZvLgK2Rz","name":"CUB-Conditions","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"let mapsetting = game.settings.get('combat-utility-belt', \"activeConditionMap\");\n\nmapsetting.forEach(element =>\n    {\n    element.activeEffect = game.items.getName(`CUB-${element.name}`)?.data.effects.contents[0];\n    }\n )\n\ngame.settings.set('combat-utility-belt', \"activeConditionMap\", mapsetting);","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.6jG3KWJBGFYrRyl1"},"scene-packer":{"sourceId":"Macro.l9Hpr6zVZvLgK2Rz","hash":"0c881c6ec7ddc02e23f59d10ea4f6766a9300136"}}}
{"_id":"m2qz0W56msMmP3Rg","name":"RollTable: Orientation","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/tools/navigation/compass-brass-blue-red.webp","scope":"global","command":"game.tables.getName(\"Orientation\").draw();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/d20-grey.svg","tooltip":"RollTable: Orientation","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.1rqDqtjNNPzhH73i"},"scene-packer":{"sourceId":"Macro.m2qz0W56msMmP3Rg","hash":"8af92b1dabb28079699919efb7a7ae5c83c7add7"}}}
{"_id":"mpxp1ilkAQ4mEw2U","name":"GM Single ShortRest","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"async function CustomShortRest(){\n    let macroActors = game.actors.filter(a => a.data.type == \"character\" && a.uuid == _token.actor.uuid);\n    for (let macroActor of macroActors) {  \n        await macroActor.shortRest({dialog: true, chat: true, newDay: false});\n    } \n}  \nCustomShortRest();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"scene-packer":{"hash":"556c4f071f5354a281e09b67604c156a7776a595","sourceId":"Macro.mpxp1ilkAQ4mEw2U"},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.nj8aY6THzO2hCB8E"},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"nj8aY6THzO2hCB8E","name":"GM All LongRest","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"async function CustomLongRest(){\n    let macroActors = game.actors.filter(a => a.data.type == \"character\");\n    for (let macroActor of macroActors) {  \n        await macroActor.longRest({dialog: true, chat: true, newDay: true});\n    } \n}  \nCustomLongRest();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"scene-packer":{"hash":"ff90467073ac243d542f68b2ea85e9001507eecf","sourceId":"Macro.nj8aY6THzO2hCB8E"},"advanced-macros":{"runAsGM":false},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"}}}
{"_id":"oOSSJvf2P9Q7Xt4c","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000","name":"Paulo","children":[],"folderPath":["temp_ce296qgq9ro"],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["30PhNY9aJohOWp6j","YiTEtg1VzxZDNXg5","7AMGrIYDPbSYOFlw","EgDAgWYofU6ML3mZ","vJdU83nvB1FRwpGx","N4mEhbpUMOQDasWm","vCfJ3bdp09VbNhwm","k2kzKz8gTxKgQHJ5","4wT8rkOcuNJXshMy","R2uxxQ2qKBP3EZJE","axlHiTSToXTc17Ko","gq68VI0rpGpV52ue","icqAbAb5qCHQYdG2","uuBOdYXQigHwg50f","pudBDiKkk8Co1QpT","z7oKSLMSNNrWejLR","JfLeCU9xKKJ4YIC8","YzCgeVWBIQi4eyBy","KNnRPGXMDdlPCTND","NHTDmWtQsz093Y1J"],"version":"2.4.6"},"scene-packer":{"hash":"78f498e528a46de316722d30e8bca3857affc205"}}}
{"_id":"pBZ0qYq5e1W8gOxQ","name":"UpdateTempHP","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/heal.svg","scope":"global","command":"let target = canvas.tokens.get(args[1]);\nif (!target) {\n  ChatMessage.create({content: `Token ${args[1]} is no longer in scene`, whisper: ChatMessage.getWhisperIDs(\"GM\")})\n  return;\n}\nlet increment = args[2];\nlet temphpMax = (target.actor.data.data.attributes.hp.tempmax < increment)? increment:target.actor.data.data.attributes.hp.tempmax;\nlet temphp = (target.actor.data.data.attributes.hp.tempmax < increment)? increment:target.actor.data.data.attributes.hp.temp;\n\nif (args[0] === \"on\") {\n  target.actor.update({\"data.attributes.hp.tempmax\": temphpMax, \"data.attributes.hp.temp\": temphp})\nChatMessage.create({content: `Meal: ${target.name} received ${increment} HP temp`})\n} else {\n  target.actor.update({\"data.attributes.hp.tempmax\": 0, \"data.attributes.hp.temp\": 0})\nChatMessage.create({content: `Meal Expiry: ${target.name} Temp HP reduced by 0`})\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true},"cf":{"id":"temp_18z1omjp318","path":"Automação Master","color":"#0080ff"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.scYvZN9M9svLXQpQ"},"scene-packer":{"sourceId":"Macro.pBZ0qYq5e1W8gOxQ","hash":"e7e09528e0c6f9eb724f8be7ba89745455729678"}}}
{"_id":"pudBDiKkk8Co1QpT","name":"Potion of Healing","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/consumables/potions/potion-tube-corked-red.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Potion of Healing\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.pudBDiKkk8Co1QpT"},"scene-packer":{"hash":"d13f5de2644bd402633b33d816f79970df1fcb26","sourceId":"Macro.pudBDiKkk8Co1QpT"}}}
{"_id":"q7o9e6xSd3eg0RQY","name":"SeeID","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"//Display Name & IDs\nfor(let token of canvas.tokens.controlled)\n{\n    ChatMessage.create({\n        content : token.name + \" \" + token.id\n    });\n}\n\nfor(let wall of canvas.walls.controlled)\n{\n    ChatMessage.create({\n        content : wall.name + \" \" + wall.id\n    })\n}\n/*\nfor(let light of canvas.lighting.activate)\n{\n    ChatMessage.create({\n        content : light.name + \" \" + light.id\n    })\n}\nfor (let note of canvas.notes.placeables)\n{\n    ChatMessage.create({\n        content :  note.name + \" \" + note.id\n     });\n}\n*/\nfor (let draw of canvas.drawings.controlled)\n{\n   ChatMessage.create({\n      content :  draw.name + \" \" + draw.id\n   });\n}\n\nfor (let tile of canvas.activeLayer.controlled)\n{\n    ChatMessage.create({\n        content :  tile.name + \" \" + tile.id\n     });\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.MuNTG5b6wHoDpuUe"},"scene-packer":{"sourceId":"Macro.q7o9e6xSd3eg0RQY","hash":"988dfb4b346227a5e0bb53243532f361ed14c680"}}}
{"_id":"q8kAJglXUA6bYlga","name":"Create Tables By Rarity","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"game.betterTables.createTableFromCompendium(\"Sub Table Foods Common\",\n    //\"world.all-itens\",\n    //\"world.all-wizard-spells\",\n    //\"world.all-cleric-spells\",\n    //\"world.all-spells\",\n    //\"innocenti-worlds.item-recipes\",\n    //\"dnd5e.items\",\n    \"innocenti-worlds.item-foods\",\n    //\"innocenti-worlds.item-gemstones\",\n    //\"innocenti-worlds.item-charm\",\n    //\"dnd5e.spells\",\n    { weightPredicate: predicate }\n);\n\nfunction predicate(entity) {\n    if(entity.type != \"consumable\") return 0;\n    //if(entity.type != \"loot\") return 0;\n    //if(entity.data.data.level != 9) return 0;\n    //if(entity.data.data.consumableType != \"scroll\") return 0;\n    //if(entity.data.data.consumableType != \"trinket\") return 0;\n    //if(entity.data.data.consumableType != \"food\") return 0;\n    //if(entity.data.data.weaponType != \"improv\") return 0;\n    //if(entity.data.data.toolType != \"music\") return 0;\n    //if(entity.data.data.armor.type != \"trinket\") return 0;\n    \n    if(entity.data.data.rarity != \"common\") return 0;\n    //if(entity.data.data.rarity != \"uncommon\") return 0;\n    //if(entity.data.data.rarity != \"rare\") return 0;\n    //if(entity.data.data.rarity != \"veryRare\") return 0;\n    //if(entity.data.data.rarity != \"legendary\") return 0\n    //if(entity.data.data.rarity != \"artifact\") return 0;\n    \n    //if(entity.data.data.price != 1000) return 0;\n    //if(entity.data.data.source != \"Animal\") return 0;\n    //if(entity.data.data.source != \"Vegetable\") return 0;\n   return 1;\n\nconsole.log(\"Name\", entity.name)\n    /*\n    switch (entity.data.data.rarity) {\n        case \"common\":\n            return 16;\n            //return 0;\n        case \"uncommon\":\n            return 8;\n            //return 0;\n        case \"rare\":\n            return 4;\n            //return 0;\n        case \"veryRare\":\n            return 2;\n            //return 0;\n        case \"legendary\":\n            return 1;\n            //return 0;\n        case \"artifact\":\n            return 1;\n            //return 0;\n            \n        default:\n            return 1;\n    }\n\n    */\n}","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Create Tables By Rarity ","colour":"#ff0000","trigger":""}},"cf":{"id":"temp_wf6q3oi631d","path":"Generators","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-actions.automation-macros.5c6EJu8botD8BsOp"},"scene-packer":{"sourceId":"Macro.q8kAJglXUA6bYlga","hash":"841368fbd2feb6dd7d2ed8999656ef8e4f4a168c"}}}
{"_id":"ryUz5dVl1HQw8hu0","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_6n1q977fuuk","path":"Player Macros","color":"#e4950c","name":"Player Macros","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["h1sM6gVa17vb4EPR","YF5eKuKN2jMSNIhC","wRQQl6XT1QppqyaE","NgiKr3KtPhnAoSXq","IkcVSqbWaT2wdm0A"],"version":"2.4.6"},"scene-packer":{"hash":"3fb3075bf4e4a454c19115096bcb66505393ae67"}}}
{"_id":"siih1hynrxsuJBON","name":"Change Cover","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"let tokens = canvas.tokens.controlled;\nfor (var i = 0; i < tokens.length; i++) {\n    //console.log(\"TOK\",tokens[i])\n    await tokens[i].document.update({'flags.dnd5e-helpers.coverLevel': 0});\n}\nconsole.log(\"END\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"scene-packer":{"sourceId":"Macro.siih1hynrxsuJBON","hash":"9e4ccab22a718520b8e75a24ee98eee9ac43154f"},"cf":{"id":"temp_18z1omjp318","path":"Automação Master","color":"#0080ff"}}}
{"_id":"uuBOdYXQigHwg50f","name":"Polymorph","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-polymorph.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Polymorph\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.uuBOdYXQigHwg50f"},"scene-packer":{"hash":"2e3fc1de2e10de0a1b7380e959915e79d7a8f72c","sourceId":"Macro.uuBOdYXQigHwg50f"}}}
{"_id":"vCfJ3bdp09VbNhwm","name":"Flexible Casting","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/magic/lightning/bolt-strike-explosion-yellow.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Flexible Casting\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.vCfJ3bdp09VbNhwm"},"scene-packer":{"hash":"6308d4f49866a7e5ce43be12ef7482e70313ca26","sourceId":"Macro.vCfJ3bdp09VbNhwm"}}}
{"_id":"vJdU83nvB1FRwpGx","name":"Fire Bolt","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-fire-bolt.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Fire Bolt\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.vJdU83nvB1FRwpGx"},"scene-packer":{"hash":"0ce5f0f42e759229db14cf1fbe94439af2230471","sourceId":"Macro.vJdU83nvB1FRwpGx"}}}
{"_id":"vnlg4zQdke2hjBi8","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_7c77qczryve","path":"Automação","color":"#000000","name":"Automação","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["BKQyN137XOS1Q3zF","KY12hUoVabb15Gy2","PPrpyeGEUXcIotUZ","K8NDRp6l1L1VW0FV","6EHyNhKiZxQTalIw","l9Hpr6zVZvLgK2Rz","QOAQEHqTlD8Du2ap","GcVOEflEjYNnP6n2","Oy8J0SwfrVlY1F02","q7o9e6xSd3eg0RQY","2ccVqghN8LvCg0jS","bY9xXiGEjz0IXLVt","X10DukjUN15Aogpw","nj8aY6THzO2hCB8E","WMHDME6nmzIn3nyB","mpxp1ilkAQ4mEw2U"],"version":"2.4.6"},"scene-packer":{"hash":"63762bbb7938a22224f5fa7750e856343437a8e5"}}}
{"_id":"wRQQl6XT1QppqyaE","name":"Open Door/Chest","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/sundries/misc/lock-open-yellow.webp","scope":"global","command":"let actions = new InnocentiOpenLock.Actions('OpenLock');","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.UXJLvaOUS8ANMPkp"},"furnace":{"runAsGM":false},"cf":{"id":"temp_6n1q977fuuk","path":"Player Macros","color":"#e4950c"},"scene-packer":{"sourceId":"Macro.wRQQl6XT1QppqyaE","defaultPermission":2,"hash":"7d1e163ba2391ab0fa0fddfb94d98712a4c327b9"}}}
{"_id":"yIUn02uyNh3AA9Lb","name":"#[CF_tempEntity]","type":"chat","author":"DPSwXpPVU8d93GBw","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"cf":{"id":"temp_18z1omjp318","path":"Automação Master","color":"#0080ff","name":"Automação Master","children":[],"folderPath":[],"fontColor":"#FFFFFF","icon":null,"sorting":"a","contents":["IdegeCeEnMvda87v","siih1hynrxsuJBON","Zgma5y5sBfS8HC6t","pBZ0qYq5e1W8gOxQ"],"version":"2.4.6"},"scene-packer":{"hash":"5c30cd60179d56f7ee3f8f54b47fdd27d95e3db4"}}}
{"_id":"z7oKSLMSNNrWejLR","name":"Ray of Frost","type":"script","author":"DPSwXpPVU8d93GBw","img":"modules/plutonium/media/icon/spell/phb-ray-of-frost.webp","scope":"actor","command":"game.dnd5e.macros.rollItem(\"Ray of Frost\")","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_xb47pdgsbyc","path":"Players Folder#/CF_SEP/Paulo","color":"#000000"},"core":{"sourceId":"Compendium.innocenti-worlds.macros-houserules.z7oKSLMSNNrWejLR"},"scene-packer":{"hash":"2b0da95ae63aa39a4c32c9c8d700cd00b449d7bf","sourceId":"Macro.z7oKSLMSNNrWejLR"}}}
{"_id":"zJI7JioCejYt5cou","name":"RollTable: Charms & Gifts","type":"script","author":"DPSwXpPVU8d93GBw","img":"icons/containers/boxes/box-gift-green.webp","scope":"global","command":"game.tables.getName(\"Charms and Gifts\").draw();","folder":null,"sort":0,"permission":{"default":0,"DPSwXpPVU8d93GBw":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"scene-packer":{"sourceId":"Macro.zJI7JioCejYt5cou","hash":"976e6cfecdf72136951ec68d235792ca664eda41"},"cf":{"id":"temp_aoc62gypm5n","path":"Roll Tables","color":"#008000"}}}
>>>>>>> master
